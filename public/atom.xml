<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[mishadoff thoughts]]></title>
  <link href="http://mishadoff.github.com/atom.xml" rel="self"/>
  <link href="http://mishadoff.github.com/"/>
  <updated>2013-02-23T02:06:23+02:00</updated>
  <id>http://mishadoff.github.com/</id>
  <author>
    <name><![CDATA[mishadoff]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Stirling's Approximation]]></title>
    <link href="http://mishadoff.github.com/blog/stirlings-approximation/"/>
    <updated>2013-02-23T01:38:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/stirlings-approximation</id>
    <content type="html"><![CDATA[<p>Do you like factorials?</p>

<p>Probably, you do. If no, whatever, read this post to know
how get rid of factorials.</p>

<!-- more -->

<h3 id="tldr">TL;DR</h3>

<script type="math/tex; mode=display">% &lt;![CDATA[

\begin{align*}
  & ln(n!) = n \cdot ln(n) - n + 1
\end{align*}
 %]]&gt;</script>

<p>It is <a href="http://en.wikipedia.org/wiki/Stirling%27s_approximation">Stirling’s approximation</a>
or just Stirling’s formula.
It allows to replace factorials with their approximation.
If you not interested in math, skip to <a href="#usage">formula usage</a></p>

<h3 id="proof">Proof</h3>

<p>Replace factorial with its definition:</p>

<script type="math/tex; mode=display">
ln(n!) = ln(1 \cdot 2 \cdot 3 ...)
</script>

<p>Transform logarithm of multiplication to sum of logarithms:</p>

<script type="math/tex; mode=display">
ln(1 \cdot 2 \cdot 3 ...) = ln(1) + ln(2) + ln(3) + ... + ln(n)
</script>

<p>Take a look at the integral $\int_a^b f(x) dx$.
Replace $f(x)$ with $ln(x)$, $a$ with $1$, and $b$ with $n$. Then use numerical
integration with step <code>1</code> and <a href="http://en.wikipedia.org/wiki/Rectangle_method">right rectangle rule</a></p>

<script type="math/tex; mode=display">
\int_1^n ln(x) dx \approx ln(2) + ln(3) + ... + ln(n)
</script>

<p>Right-hand parts of two previous formulas are equal, with respect $ln(1)=0$. Then:</p>

<script type="math/tex; mode=display">
ln(1 \cdot 2 \cdot 3 ...) \approx \int_1^n ln(x) dx
</script>

<p>Calculate integral using <a href="http://en.wikipedia.org/wiki/Integration_by_parts">integration by parts</a>:</p>

<script type="math/tex; mode=display">
\int ln(x) dx = x \cdot ln(x) - \int x d(ln(x)) = x \cdot ln(x) - \int dt = x \cdot ln(x) - x + C
</script>

<p>Applying boundaries <code>[1..n]</code></p>

<script type="math/tex; mode=display">
n \cdot ln(n) - n + C - 1 \cdot ln(1) + 1 - C = n \cdot ln(n) - n + 1
</script>

<p>yields final result:</p>

<script type="math/tex; mode=display">
ln(n!) = n \cdot ln(n) - n + 1
</script>

<p>Exactly what on the top.</p>

<h3 id="developer-proof">Developer Proof</h3>

<p>It is much simpler proof, with lose of accuracy, but still valid for partial applications.</p>

<p>Replace factorial with its definition:</p>

<script type="math/tex; mode=display">
ln(n!) = ln(1 \cdot 2 \cdot 3 ...)
</script>

<p>Transform logarithm of multiplication to sum of logarithms:</p>

<script type="math/tex; mode=display">
ln(1 \cdot 2 \cdot 3 ...) = ln(1) + ln(2) + ln(3) + ... = \sum_{i=1}^n ln(i)
</script>

<p>From monotonic property of logarithms $a \leq b \rightarrow ln(a) \leq ln(b)$
take upper bound for each $ln(i)$:</p>

<script type="math/tex; mode=display">
\forall i \; ln(i) \leq ln(n)
</script>

<p>Then, using worst case substitution, sum can be rewritten as:</p>

<script type="math/tex; mode=display">
\sum_{i=1}^n ln(i) \leq \sum_{i=1}^N ln(n)
</script>

<p>But $ln(n)$ does not depend on <code>i</code>, so get rid of sum:</p>

<script type="math/tex; mode=display">
\sum_{i=1}^n ln(n) = n \cdot ln(n)
</script>

<p>Done.</p>

<h3 id="a-idusageausage"><a id="usage"></a>Usage</h3>

<ul>
  <li><strong>Algorithm complexity</strong></li>
</ul>

<p>No one cares about <code>O(log(n!))</code> of your algorithm, but everybody
knows that <code>O(n log n)</code>, <a href="http://en.wikipedia.org/wiki/Time_complexity#Linearithmic.2Fquasilinear_time">linearithmic complexity</a>,
is very good property of algorithm. By the way, do not scare people with factorial sign.</p>

<ul>
  <li><strong>Overflow prevention</strong></li>
</ul>

<p>If you try to calculate <code>ln(n!)</code> with most straightforward implementation
without suitable datatype, you’ll likely get the number overflow exception, in spite
of result value is not very large. For example for <code>n=100</code> overall result is
approximately <code>363</code> (<em>Stirling’s approximation gives 361</em>) where factorial value is $10^{154}$.</p>

<ul>
  <li><strong>Speedup</strong></li>
</ul>

<p>As far as I know, calculating factorial is <code>O(n)</code> complexity algorithm,
because we need <code>n</code> multiplications. Using Stirling’s approximation we need to calculate $n^n$ term, that can
be calculated in <code>O(log n)</code> with <a href="http://en.wikipedia.org/wiki/Exponentiation_by_squaring">clever trick</a></p>

<ul>
  <li><strong>Gamma function</strong></li>
</ul>

<p>It can be surprising, but factorials defined not only for positive integers.
So, for example <code>2.5!</code> is completely valid expression. <code>-6!</code> also. They can be calculated
using <a href="http://en.wikipedia.org/wiki/Gamma_function">Gamma-functions</a> for real numbers. Unfortunately, they are
pretty complicated, so people use Stirling’s formula instead.</p>

<ul>
  <li><strong>Partial applications</strong></li>
</ul>

<p>Almost everything that using factorials can use Stirling’s approximation. Permutations,
binomial coefficients, fractals, number theory and a huge amount of topics I’m not aware of.</p>

<p><strong>P.S.</strong> Stirling’s formula presented here is rough enough. More accurate formula is
$n! = \sqrt{2\pi} n^{n + 0.5}e^{-n}$.
Check its proof <a href="http://www.sosmath.com/calculus/sequence/stirling/stirling.html">here</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Heisenberg Principle]]></title>
    <link href="http://mishadoff.github.com/blog/heisenberg-principle/"/>
    <updated>2013-02-21T00:24:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/heisenberg-principle</id>
    <content type="html"><![CDATA[<p>It is so obvious, so I decided to write about it.</p>

<!-- more -->

<p><img src="http://i.imgur.com/pxxRKNR.jpg" alt="" /></p>

<p><a href="http://en.wikipedia.org/wiki/Uncertainty_principle">Heisenberg principle</a>
came from quantum mechanics and means that you can’t know exactly
both coordinates and speed of particle. If you improve accuracy of detecting
position, you lose accuracy in detecting speed and vice versa. <em>Uncertain</em> stuff.</p>

<p>In human-readable form it sounds like</p>

<blockquote>
  <p>Either one or the other</p>
</blockquote>

<p>The same in every field, even in software engineering.
If you implementing something or fixing bugs and your boss
yelling: “you must work <a href="http://www.youtube.com/watch?v=gAjR4_CbPpQ">better and faster</a>”
tell him <em>either one or the other</em>.</p>

<p><strong>P.S.</strong> Actually, you can say “go fuck yourself”, but it won’t be polite.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clojure Euler: Problem 015]]></title>
    <link href="http://mishadoff.github.com/blog/clojure-euler-problem-015/"/>
    <updated>2013-02-19T00:38:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/clojure-euler-problem-015</id>
    <content type="html"><![CDATA[<blockquote>
  <p>Starting in the top left corner of a 2 x 2 grid, there are 6 routes
(without backtracking) to the bottom right corner.</p>

  <p>How many routes are there through a 20 x 20 grid?</p>
</blockquote>

<p>Permalink: <a href="http://projecteuler.net/problem=15">http://projecteuler.net/problem=15</a></p>

<!-- more -->

<p><img src="http://projecteuler.net/project/images/p_015.gif" alt="" /></p>

<p>Picture is always a huge help to find correct the solution.
Let’s see the pattern here, with another picture</p>

<p><em>Warning:</em> If you don’t understand art, don’t look at that picture.</p>

<p><img src="http://i.imgur.com/WNEQNxG.png" alt="" /></p>

<p>It’s a solution for 3 x 3 grid. We trying to process it by steps:</p>

<ul>
  <li>At the start we located at the top left corner <code>[0, 0]</code>. There is just one case
to be at the start so we put <code>1</code> to that point.</li>
  <li>Then we move either down <code>[1, 0]</code> or right <code>[0, 1]</code>, and we put <code>1</code>
on the edges of the second diagonal line.</li>
  <li>Obviously, the point <code>[1, 1]</code> we can reach either from <code>[0, 1]</code> or from <code>[1, 0]</code>,
so there are two routes, and so on.</li>
</ul>

<p>If you just output the numbers from each diagonal line you’ll get:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class=""><span class="line">   1
</span><span class="line">  1 1
</span><span class="line"> 1 2 1
</span><span class="line">1 3 3 1
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>It’s famous <a href="http://en.wikipedia.org/wiki/Pascal%27s_triangle">Pascal’s triangle</a>.
Each element in this triangle obtained by sum of two closest elements from the upper row.</p>

<p>To get desired result we need to sum these numbers again, until we get one number.
But it’s also numbers from Pascal’s triangle.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class=""><span class="line">1   3   3   1
</span><span class="line">  4   6   4
</span><span class="line">   10  10
</span><span class="line">     20</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We can treat Pascal’s triangle as a sequence, and each row is an element. Then the
following function calculates next row:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">routes-extend</span> <span class="p">[</span><span class="nv">lst</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">size</span> <span class="p">(</span><span class="nb">count </span><span class="nv">lst</span><span class="p">)]</span>
</span><span class="line">    <span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">i</span> <span class="p">(</span><span class="nb">range </span><span class="p">(</span><span class="nb">inc </span><span class="nv">size</span><span class="p">))]</span>
</span><span class="line">      <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">or </span><span class="p">(</span><span class="nb">= </span><span class="mi">0</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="nv">size</span> <span class="nv">i</span><span class="p">))</span> <span class="mi">1</span>
</span><span class="line">        <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">nth </span><span class="nv">lst</span> <span class="p">(</span><span class="nb">dec </span><span class="nv">i</span><span class="p">))</span> <span class="p">(</span><span class="nb">nth </span><span class="nv">lst</span> <span class="nv">i</span><span class="p">))))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Usage:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nf">routes-extend</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="nv">=&gt;</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">1</span><span class="p">]</span>
</span><span class="line"><span class="p">(</span><span class="nf">routes-extend</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">1</span><span class="p">])</span> <span class="nv">=&gt;</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Now we can build infinite sequence of Pascal’s triangle rows:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">iterate </span><span class="nv">routes-extend</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>For <code>3 x 3</code> grid we had 7 diagonals, each of them represented one row.
Take a guess. For <code>n x n</code> grid we need to get <code>2 * n + 1</code> row. And take it
middle element, which, of course, will be with the index <code>n</code>.</p>

<p>That’s the final solution:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">n</span> <span class="mi">20</span> <span class="nv">d</span> <span class="p">(</span><span class="nb">inc </span><span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="mi">2</span><span class="p">))]</span>
</span><span class="line">  <span class="p">(</span><span class="nb">nth </span><span class="p">(</span><span class="nb">last </span><span class="p">(</span><span class="nb">take </span><span class="nv">d</span> <span class="p">(</span><span class="nb">iterate </span><span class="nv">routes-extend</span> <span class="p">[</span><span class="mi">1</span><span class="p">])))</span> <span class="nv">n</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Problem solved.</p>

<p><a href="https://github.com/mishadoff/project-euler/blob/master/src/project_euler/problem015.clj">Code</a></p>

<p><strong>P.S</strong> Two points I want to admit here. First of all, drawing pictures
and trying to understand problem with pictures is a powerful technique that must be
used for every problem.</p>

<p>Second of all, you can see that our algorithm has complexity of <code>O(n^2)</code>. But ideal
solution is <code>O(1)</code> with usage <a href="http://en.wikipedia.org/wiki/Binomial_coefficient">binomial coefficient</a>
<code>(2*n, n)</code>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Standard ML]]></title>
    <link href="http://mishadoff.github.com/blog/standard-ml/"/>
    <updated>2013-02-16T13:33:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/standard-ml</id>
    <content type="html"><![CDATA[<p>Last weekend I was hacking <a href="http://en.wikipedia.org/wiki/Standard_ML">Standard ML</a> a bit.</p>

<!-- more -->

<h3 id="coursera">Coursera</h3>

<p>There are excellent course on coursera called <a href="https://class.coursera.org/proglang-2012-001/class/index">Programming Languages</a></p>

<p>Currently, the first half is available, that explains basic and advanced functional programming constructions
with Standard ML as primary language. Later some idioms will be presented using
<strong>Racket</strong> and <strong>Ruby</strong> (<em>maybe, I will finally understand ruby</em>) so you can treat this course as introduction
to these languages. In fact, it teaches much more than “<em>how to code in XXX</em>”.</p>

<h3 id="tools">Tools</h3>

<p>For playing with ML you need <a href="http://www.smlnj.org/">SML/NJ</a> compiler and
<a href="http://www.smlnj.org/doc/Emacs/sml-mode.html">sml-mode</a> for emacs.</p>

<p><em>If you don’t have emacs installed, do it right now!</em></p>

<h3 id="play">Play</h3>

<p>Following snippets give you basic understanding of ML or
refresh your knowledge for syntax.</p>

<p>Print “Hello, world!”:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">print_hello_world</span> <span class="p">()</span> <span class="p">=</span> <span class="n">print</span> <span class="s2">&quot;Hello, world</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Variables (<em>in fact, values</em>):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">val</span> <span class="nv">a</span> <span class="p">=</span> <span class="mi">38</span><span class="p">;</span>
</span><span class="line"><span class="kr">val</span> <span class="nv">b</span> <span class="p">=</span> <span class="n">a</span> <span class="n">+</span> <span class="mi">3</span><span class="p">;</span>
</span><span class="line"><span class="kr">val</span> <span class="nv">c</span> <span class="p">=</span> <span class="n">b</span> <span class="n">+</span> <span class="mi">1</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Conditionals:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">val</span> <span class="nv">cond</span> <span class="p">=</span> <span class="kr">if</span> <span class="mi">5</span> <span class="n">&gt;</span> <span class="mi">4</span> <span class="kr">then</span> <span class="mi">5</span> <span class="kr">else</span> <span class="mi">4</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Boolean operators have terrible names:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">val</span> <span class="nv">cond2</span> <span class="p">=</span> <span class="kr">if</span> <span class="mi">5</span> <span class="n">&gt;</span> <span class="mi">4</span> <span class="kr">andalso</span> <span class="mi">4</span> <span class="n">&gt;</span> <span class="mi">5</span> <span class="kr">then</span> <span class="mi">5</span> <span class="kr">else</span> <span class="mi">7</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Function with one parameter:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">square</span> <span class="n">x</span> <span class="p">=</span> <span class="n">x</span> <span class="n">*</span> <span class="n">x</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Function with more than one parameter:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">sum</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="p">=</span> <span class="n">x</span> <span class="n">+</span> <span class="n">y</span> <span class="n">+</span> <span class="n">z</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Actually, it’s not three parameters, it’s one parameter - tuple:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">swap</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>To access tuple elements use hash-number, note you can specify tuple type:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">get_month</span> <span class="p">(</span><span class="n">date</span> <span class="p">:</span> <span class="n">int</span> <span class="n">*</span> <span class="n">string</span> <span class="n">*</span> <span class="n">int</span><span class="p">)</span> <span class="p">:</span> <span class="n">string</span><span class="p">=</span> <span class="p">(</span><span class="nl">#2</span> <span class="n">date</span><span class="p">)</span>
</span><span class="line"><span class="kr">val</span> <span class="nv">month1</span> <span class="p">=</span> <span class="n">get_month</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="s2">&quot;January&quot;</span><span class="p">,</span> <span class="mi">21</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You can specify input types and return type, but ML is very clever. Almost always
it can detect correct type using <em>type inference</em> without explicit definition.</p>

<p><em>I don’t understand it! Explain, please</em>. Comments:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="cm">(* Operation &#39;*&#39; defined for int types, so this function has type int -&gt; int *)</span>
</span><span class="line"><span class="kr">fun</span> <span class="nf">cube</span> <span class="n">x</span> <span class="p">=</span> <span class="n">x</span> <span class="n">*</span> <span class="n">x</span> <span class="n">*</span> <span class="n">x</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>There is records. It’s like named tuples.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">get_month_real</span> <span class="p">({</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">})</span> <span class="p">=</span> <span class="n">month</span>
</span><span class="line"><span class="kr">val</span> <span class="nv">month2</span> <span class="p">=</span> <span class="n">get_month_real</span><span class="p">({</span><span class="n">year</span><span class="p">=</span><span class="mi">2012</span><span class="p">,</span> <span class="n">month</span><span class="p">=</span><span class="s2">&quot;January&quot;</span><span class="p">,</span> <span class="n">day</span><span class="p">=</span><span class="mi">21</span><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Using <code>let</code> form we can define new lexical scope:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">add3</span> <span class="n">x</span> <span class="p">=</span>
</span><span class="line">    <span class="kr">let</span>
</span><span class="line">        <span class="kr">val</span> <span class="nv">num</span> <span class="p">=</span> <span class="mi">3</span>
</span><span class="line">    <span class="kr">in</span>
</span><span class="line">        <span class="n">x</span> <span class="n">+</span> <span class="mi">3</span>
</span><span class="line">    <span class="kr">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This leads to closures (<em>function + context</em>):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">add3</span> <span class="n">x</span> <span class="p">=</span>
</span><span class="line">    <span class="kr">let</span>
</span><span class="line">        <span class="kr">val</span> <span class="nv">num</span> <span class="p">=</span> <span class="mi">3</span>
</span><span class="line">        <span class="kr">fun</span> <span class="nf">add_to</span> <span class="n">x</span> <span class="p">=</span> <span class="n">x</span> <span class="n">+</span> <span class="n">num</span>
</span><span class="line">    <span class="kr">in</span>
</span><span class="line">        <span class="n">add_to</span> <span class="n">x</span>
</span><span class="line">    <span class="kr">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Function <code>add_to</code> capture <code>num</code> value from context.</p>

<p>By the way functions are first-class objects and values also,
so we can assign one function to another:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">val</span> <span class="nv">another_cube</span> <span class="p">=</span> <span class="n">cube</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Function composition becomes a piece of cake:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">val</span> <span class="nv">cube_and_cube</span> <span class="p">=</span> <span class="n">cube</span> <span class="n">o</span> <span class="n">cube</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We even can pass function as a parameter:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">binary_apply</span> <span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=</span> <span class="n">f</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span class="line"><span class="n">binary_apply</span><span class="p">(</span><span class="n">swap</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We don’t forced to provide function name, we can use lambdas:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="n">binary_apply</span><span class="p">(</span><span class="kr">fn</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="n">*</span> <span class="n">y</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">46</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This helps us easily implement such useful functions as <code>map</code>, <code>reduce</code> and <code>filter</code>.
But they are already available in
<a href="http://www.standardml.org/Basis/manpages.html">Standard ML Basis Library</a></p>

<p>Another great feature is <em>pattern-matching</em>. Here is factorial function</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">factorial</span> <span class="n">x</span> <span class="p">=</span>
</span><span class="line">    <span class="kr">case</span> <span class="n">x</span> <span class="kr">of</span>
</span><span class="line">        <span class="mi">0</span> <span class="p">=&gt;</span> <span class="mi">1</span>
</span><span class="line">      <span class="n">|</span> <span class="p">_</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="n">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">x</span> <span class="n">-</span> <span class="mi">1</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>or list concatenation</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">fun</span> <span class="nf">concat</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=</span>
</span><span class="line">    <span class="kr">case</span> <span class="n">x</span> <span class="kr">of</span>
</span><span class="line">        <span class="p">[]</span> <span class="p">=&gt;</span> <span class="n">y</span>
</span><span class="line">      <span class="n">|</span> <span class="n">x::xs</span> <span class="p">=&gt;</span> <span class="n">x::concat</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Honestly, it’s just baby examples of pattern matching. In fact, it is much more
powerful.</p>

<p>And the last thing I wanted to show is datatypes:</p>

<p>To define a list:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">datatype</span> <span class="nd">&#39;a</span> <span class="kt">list</span> <span class="p">=</span> <span class="nc">EMPTY</span> <span class="p">|</span> <span class="nc">CONS</span> <span class="kr">of</span> <span class="nd">&#39;a</span> <span class="n">*</span> <span class="nd">&#39;a</span> <span class="n">list</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>To create that list:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sml"><span class="line"><span class="kr">val</span> <span class="nv">list</span> <span class="p">=</span> <span class="n">CONS</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">CONS</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">CONS</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">EMPTY</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>That’s very small part of all that can be done in ML. There are also a lot of useful
constructs and idioms that not covered: type synonyms, polymorphic types,
equality types, tail recursion, mutual recursion, function wrapping,
currying, partial application, advanced pattern matching, signatures,
modules and lot more.</p>

<p>If you really interested you will find a lot of these terms exciting.</p>

<p>Full code is available on
<a href="https://github.com/mishadoff/prog-experiment/blob/master/sml/play.sml">github</a></p>

<h3 id="impressions">Impressions</h3>

<p>ML is a great language. Perhaps, it is not so great as Java in enterprise, and not
so great as Clojure in rapid prototyping, but it’s worth to devote
few days for ML basics. It really improve your dev skills and maybe made your
<em>Factories</em>, <em>Bridges</em> and <em>Proxies</em> better.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clojure Euler: Problem 014]]></title>
    <link href="http://mishadoff.github.com/blog/clojure-euler-problem-014/"/>
    <updated>2013-02-16T01:08:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/clojure-euler-problem-014</id>
    <content type="html"><![CDATA[<blockquote>
  <p>Which starting number, under one million, produces the longest Collatz chain?</p>
</blockquote>

<p>Permalink: <a href="http://projecteuler.net/problem=14">http://projecteuler.net/problem=14</a></p>

<!-- more -->

<blockquote>
  <p>The following iterative sequence is defined for the set of positive integers:</p>

  <p>n → n/2 (n is even)</p>

  <p>n → 3n + 1 (n is odd)</p>

  <p>Using the rule above and starting with 13, we generate the following sequence:</p>

  <p>13 → 40 → 20 → 10 → 5 → 16 → 8 → 4 → 2 → 1</p>

  <p>It can be seen that this sequence (starting at 13 and finishing at 1)
contains 10 terms. Although it has not been proved yet (Collatz Problem),
it is thought that all starting numbers finish at 1.</p>

  <p>Which starting number, under one million, produces the longest chain?</p>

  <p>NOTE: Once the chain starts the terms are allowed to go above one million.</p>
</blockquote>

<p>Sequences again.
So, first of all we need function to detect next collatz number.
It is pretty straightforward:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">collatz-next</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">even?</span> <span class="nv">n</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">n</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">inc </span><span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="mi">3</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Using this <em>next-element-generator</em> we can generate infinite collatz sequence,
starting from number <code>n</code>:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">iterate </span><span class="nv">collatz-next</span> <span class="nv">n</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>But instead of infinite sequence, we stop processing when we reach <code>1</code> and calculate
count of collatz chain sequence:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">collatz-chain-length</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="nb">inc </span><span class="p">(</span><span class="nb">count </span><span class="p">(</span><span class="nb">take-while </span><span class="o">#</span><span class="p">(</span><span class="nb">&gt; </span><span class="nv">%</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">iterate </span><span class="nv">collatz-next</span> <span class="nv">n</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Now we have almost all code logic and just use it: calculate collatz chain
for all numbers in range <code>[1..1000000]</code>, find maximum and output its index:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">first </span><span class="p">(</span><span class="nb">reduce </span><span class="o">#</span><span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nb">second </span><span class="nv">%1</span><span class="p">)</span> <span class="p">(</span><span class="nb">second </span><span class="nv">%2</span><span class="p">))</span> <span class="nv">%1</span> <span class="nv">%2</span><span class="p">)</span>
</span><span class="line">               <span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nb">list </span><span class="nv">%</span> <span class="p">(</span><span class="nf">collatz-chain-length</span> <span class="nv">%</span><span class="p">))</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="mi">1000000</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Run it. Wait a minute. I mean minute <em>literally</em>.</p>

<p>The time of caclulation is slightly greater than <strong>one minute</strong> on my machine,
and I have no idea how to solve it another way.</p>

<p>I am sure there is a better algorithm than mine. But I don’t know it.
What I know is try to re-read problem definion if you are stuck. Especially that part:</p>

<blockquote>
  <p>13 → 40 → 20 → 10 → 5 → 16 → 8 → 4 → 2 → 1</p>
</blockquote>

<p>So, for <code>13</code> the chain length is <code>10</code>, for <code>40</code> is <code>9</code>, for <code>20</code> is <code>8</code>,…</p>

<p>Got it?</p>

<p>Each time we calculate length we perform <em>repeated calculation</em>. If we know
chain length of <code>13</code>, and whole its path to <code>1</code> we don’t need to calculate length
for <code>40</code>, <code>20</code> and so on.</p>

<p>So the optimization is <em>somehow to cache the results</em>. But at first we need to rewrite
it to have recursive solution.</p>

<p>Here the first (<em>and final</em>) version:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">collatz-chain-recursive</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)</span> <span class="mi">1</span>
</span><span class="line">      <span class="p">(</span><span class="nb">inc </span><span class="p">(</span><span class="nf">collatz-chain-recursive</span> <span class="p">(</span><span class="nf">collatz-next</span> <span class="nv">n</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Recursion is impressive at the point that its implementation
almost exactly follows the problem definition. It is easy to understand.</p>

<p>But, as you may notice our implementation not
<a href="http://en.wikipedia.org/wiki/Tail_call">tail-recursive</a> so we can
have troubles. Do not think about it unless we actually have them.</p>

<p>For the sake of fun let’s run this function instead of previous to
obtain the results.</p>

<p><strong>20 seconds</strong>, it is great. I even don’t think that
this simple recursive function gives such boost in performance.</p>

<p>One little tweak in result function:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nf">first</span>
</span><span class="line">  <span class="p">(</span><span class="nb">apply max-key </span><span class="nv">second</span>
</span><span class="line">         <span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nb">list </span><span class="nv">%</span> <span class="p">(</span><span class="nf">collatz-chain-recursive</span> <span class="nv">%</span><span class="p">))</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="mi">1000000</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And we have <strong>~12 seconds</strong>.</p>

<p>Unexpected “The End”. Yeah, I love The Doors.</p>

<p><a href="https://github.com/mishadoff/project-euler/blob/master/src/project_euler/problem014.clj">code-code</a></p>

<p><strong>P.S.</strong> I really wanted to explain technique called
<a href="http://en.wikipedia.org/wiki/Memoization">memoization</a> and
simple clojure function <a href="http://clojuredocs.org/clojure_core/clojure.core/memoize">memoize</a>,
but seems that caching result doesn’t have much sense here because
12 seconds is acceptable. We will have chance to introduce
memoization later, where it will be more useful. By the way, I am <em>lazy</em>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Programming Digest 1]]></title>
    <link href="http://mishadoff.github.com/blog/programming-digest-1/"/>
    <updated>2013-02-12T02:00:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/programming-digest-1</id>
    <content type="html"><![CDATA[<p>How to get job at Google, estimate complexity of your algorithm,
what is <em>Structural Immutability</em>, why PHP is awful and Java is awesome, best programming jokes and lot more.</p>

<!-- more -->

<h3 id="get-that-job-at-googlehttpsteve-yeggeblogspotcom200803get-that-job-at-googlehtml">1. <a href="http://steve-yegge.blogspot.com/2008/03/get-that-job-at-google.html">Get that job at Google</a></h3>

<blockquote>
  <p>…it’s highly likely that someone on the loop will be unimpressed with you,
even if you are Alan Turing. Especially if you’re Alan Turing,
in fact, since it means you obviously don’t know C++</p>
</blockquote>

<p>The quote accurately explains what this post about. The author gives great mental and
technical tips about interviewing process (not only in Google).
Big portion of motivation guaranteed, perhaps you man feel dumber after reading.</p>

<p>In few words, you must know: algorithm complexity, sorting, hashtables, trees,
graphs, other data structures, math, operating systems and at least one programming language very well.
Not bad, right? After reading that article I’ve build long-term learning plan for myself, which is still
not succesful. Great article.</p>

<h3 id="a-gentle-introduction-to-algorithm-complexity-analysishttpdiscretegrcomplexity">2. <a href="http://discrete.gr/complexity/">A Gentle Introduction to Algorithm Complexity Analysis</a></h3>

<p>This article helps you partially cover first thing from previous article: <em>algorithm complexity</em>.
By the way, it is written with understandable (<em>for programmers</em>) language, examples, pictures, excerpts - I like
such style.</p>

<p>After reading, you’ll understand what time/space complexity is, difference between <em>Theta</em> and <em>Big-O</em> notations,
recursive functions complexity and lot more. By the way, you will learn basic classes of time complexities, and get
skill to classify that complexities on O(n), O(n^2 ), O(n*logn), etc. Note, the articles consists of some excercises, which immediately followed
with solutions. It is more productive to solve this exercises by yourselves and then compare to solutions.</p>

<p>If you already know all that, don’t skip! It also helpful to fresh you knowledge.</p>

<h3 id="on-structural-immutabilityhttpclojurefunwordpresscom20130121on-structural-immutability">3. <a href="http://clojurefun.wordpress.com/2013/01/21/on-structural-immutability/">On Structural Immutability</a></h3>

<p>What is Structural Immutability?</p>

<p>We know difference between mutable and immutable data structures and their pros and cons.
Structural immutability means that you <em>can</em> change the contents of you data, but <em>can not</em> change their structure.
It gives better performance than plain immutable objects, but also keep your concurrent programs easier than with
full mutability. Plain old array is an example. Read it to know more.</p>

<h3 id="php-a-fractal-of-bad-designhttpmeveekuncomblog20120409php-a-fractal-of-bad-design">4. <a href="http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/">PHP: a fractal of bad design</a></h3>

<blockquote>
  <p>Virtually every feature in PHP is broken somehow</p>
</blockquote>

<p>Whole article is a criticism of bad PHP language design.</p>

<blockquote>
  <p>PHP was originally designed explicitly for non-programmers (and, reading between the lines, non-programs)</p>
</blockquote>

<p>Total destroy. I mean it - total.</p>

<blockquote>
  <p>Array… This one datatype acts as a list, ordered hash, ordered set,
sparse list, and occasionally some strange combination of those.
How does it perform? What kind of memory use will there be?
Who knows? Not like I have other options, anyway.</p>
</blockquote>

<p>As I never know PHP, and hope won’t, that article was one of the funniest things I ever read.</p>

<blockquote>
  <p>equality operator is not transitive…comparison is not even consistent</p>
</blockquote>

<p>If you PHPist don’t go away, just read it. Maybe it will change your life.</p>

<blockquote>
  <p>Genericism… There is none. If a function might need to do two slightly different things, PHP just has two functions.</p>
</blockquote>

<p>Stop quoting. Just read it.</p>

<h3 id="do-not-pass-this-way-againhttpgrimoirecamysqlchoose-something-else">5. <a href="http://grimoire.ca/mysql/choose-something-else">Do Not Pass This Way Again</a></h3>

<blockquote>
  <p>Considering MySQL? Use something else. Already on MySQL? Migrate.</p>
</blockquote>

<p>This article logically continues previous one, but for now critisism on MySQL.
Perhaps, it is not powerful as PHP version, but still worth to read.</p>

<h3 id="big-arrays-in-javahttpwwwomsndeblogbig-arrays-in-java">6. <a href="http://www.omsn.de/blog/big-arrays-in-java">Big arrays in Java</a></h3>

<p>Two articles of hate in a row, and currently Java? No way.
How much we hate Java so we love it. By the way, JDK8 is soon.</p>

<p>Maybe this post not so expressive as previous ones, but it reveals capability I never knew of.
How to create array in Java with size greater than <code>Integer.MAX_VALUE</code>. Use the undocumented
class <code>sun.misc.Unsafe</code>. Just note this only works in SunJDK and OpenJDK.</p>

<h3 id="state-of-the-lambdahttpcropenjdkjavanetbriangoetzlambdalambda-state-4html">7. <a href="http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-4.html">State of the Lambda</a></h3>

<p>If we started about JDK8…</p>

<p>The most interesting feature set in expected JDK8 is Project Lambda.</p>

<p>Functional interfaces and functions without all that finals in lexical scope and anonymous classes,
common patterns for list processing like <code>map</code>, <code>reduce</code> and <code>filter</code>,
parallelism, streams, method references and lot more comming soon.</p>

<p><em>What is the default method implementation in the interface?!</em></p>

<h3 id="fantastic-game-development-tutorials-from-across-the-webhttpgamedevtutspluscomarticlesroundupsfantastic-gamedev-tutorials-from-across-the-web">8. <a href="http://gamedev.tutsplus.com/articles/roundups/fantastic-gamedev-tutorials-from-across-the-web/">40+ Fantastic Game Development Tutorials From Across the Web</a></h3>

<p>Have you ever had the passion to write your own game?</p>

<p>I had. Because I like games and I even tried. Unfortunately, not so succesful as expected, but anyway.</p>

<blockquote>
  <p>We need to go deeper</p>
</blockquote>

<p>Honestly, it’s not a joke that I post link to another digest. It gathers a lot of gamedev tutorials and if
you really interested in gamedev, you’ll find a lot of there including game algorithms,
popular engine tutorials, math behind the games, design questions and more useful tips. Great stuff.</p>

<h3 id="how-to-pair-socks-from-a-pile-efficientlyhttpstackoverflowcomquestions14415881how-to-pair-socks-from-a-pile-efficiently">9. <a href="http://stackoverflow.com/questions/14415881/how-to-pair-socks-from-a-pile-efficiently">How to pair socks from a pile efficiently?</a></h3>

<p>Bored to pair your socks every time? Learn how to do it efficiently.</p>

<p>At first glance it is a humorous question, indeed it is, but also it is an interesting real-world
problem with variety of algorithms can be applied. I think all algorithm courses should be teached
that way.</p>

<h3 id="what-is-your-best-programming-jokehttpstackoverflowcomquestions234075what-is-your-best-programmer-joke1284458">10. <a href="http://stackoverflow.com/questions/234075/what-is-your-best-programmer-joke/1284458">What is your best programming joke</a></h3>

<blockquote>
  <p>If you put a million monkeys at a million keyboards, one of them will eventually write a Java program.</p>

  <p>The rest of them will write Perl programs.</p>
</blockquote>

<p>If you have an hour or two reserved for laughing, just read this. A <strong>lot</strong> of
crazy programming jokes. Stackoverflow community is amazing.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Programming Digest Announcement]]></title>
    <link href="http://mishadoff.github.com/blog/programming-digest-announcement/"/>
    <updated>2013-02-11T23:00:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/programming-digest-announcement</id>
    <content type="html"><![CDATA[<p>Recently, I come up with idea to share my favorite articles I found
on the internet and give basic description for them.</p>

<!-- more -->

<p>I do not plan this <em>digest</em> as periodical thing,
so the first pattern I found appropriate is to publish this as soon
as I have ten articles marked as <em>favorite</em> somewhere.</p>

<p>That’s the rule: <strong>each post - 10 articles</strong>.</p>

<p><em>Favorite</em> means <em>really favorite</em>, so I do not crosspost every article I’ve read.</p>

<p>Hard to say what topics will be covered.
I call it <em>programming digest</em> because most of articles will be somehow
related to programming, but do not blame me if you see articles with another
topic (math or humour), believe me they can be interesting also.</p>

<p>By the way, a lot of articles may be old, even very old (<em>don’t call me Necromancer</em>)
but if they appear here, I found them somehow relevant and important to post.</p>

<p>Hope, you’ll find such sort of digest is interesting for reading and I like if you
share your favorite <em>programming-related</em> articles with me.</p>

<p>Have fun!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Data Analysis: Facebook Hacker Cup 2013]]></title>
    <link href="http://mishadoff.github.com/blog/data-analysis-facebook-hacker-cup/"/>
    <updated>2013-02-01T12:42:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/data-analysis-facebook-hacker-cup</id>
    <content type="html"><![CDATA[<p>What programming language is most used?</p>

<!-- more -->

<p>To answer this question we use results from the qualification round
of <a href="https://www.facebook.com/hackercup">Facebook Hacker Cup 2013</a></p>

<p>If you only interested in statistics, <a href="#stats">skip!</a></p>

<h3 id="intro">0. Intro</h3>

<p>As you may know, Facebook Hacker Cup is a programming contest. You have programming
problem and you need to solve it, in most cases in efficient way. You get input file
and you need to submit the output file in less than 6 minutes. Pretty simple.
The interesting part you need to submit your source code, that can be reviewed by
any of contestants after round.</p>

<p>These sources we use to get programming language statistics.</p>

<h3 id="data">1. Data</h3>

<p>Primary resource in statistics is data.</p>

<p>We have <a href="https://www.facebook.com/hackercup/scoreboard?round=185564241586420">scoreboard</a> page
(<em>You must be logged to FB to see results</em>) and interested in all links named <em>source</em>.
Open every link manually takes much time, so we will use automated approach
and will write program. Yes, in clojure.</p>

<h4 id="dependencies">Dependencies</h4>

<p>For facebook authentification we can use:</p>

<ul>
  <li><a href="https://github.com/DerGuteMoritz/clj-oauth2">OAuth authentification</a></li>
  <li><a href="https://developers.facebook.com/">Facebook app</a></li>
  <li><a href="http://seleniumhq.org/">Selenium</a></li>
</ul>

<p>I didn’t think too much about alternatives,
because I wanted to try selenium in clojure. It’s a time!</p>

<p>In few words, selenium provides capability to perform programmatically
browser events. Often used in automation. To use selenium in clojure program
just add <code>[clj-webdriver "0.6.0-beta2"]</code> to your project dependencies.</p>

<p>To simplify HTTP GET access we use library <code>[clj-http "0.6.3"]</code> and for
additional help <code>[org.clojure/clojure-contrib "1.2.0"]</code>.</p>

<p>In code we use following <em>requires</em></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clj-http.client</span> <span class="ss">:as</span> <span class="nv">http</span><span class="p">])</span>
</span><span class="line"><span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clj-webdriver.taxi</span> <span class="ss">:as</span> <span class="nv">web</span><span class="p">])</span>
</span><span class="line"><span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clj-webdriver.core</span> <span class="ss">:as</span> <span class="nv">c</span><span class="p">])</span>
</span><span class="line"><span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clojure.contrib.math</span> <span class="ss">:as</span> <span class="nv">math</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="automation">Automation</h4>

<p>Before we will automate actions to gather sources we need to decide
what these actions are?</p>

<ul>
  <li>Run browser</li>
  <li>Open facebook url</li>
  <li>Login to facebook
    <ul>
      <li>Enter login</li>
      <li>Enter password</li>
      <li>Press submit</li>
    </ul>
  </li>
  <li>Go to scoreboard page</li>
  <li>Process each page <code>loop [1..n]</code>
    <ul>
      <li>Go to page <code>n</code></li>
      <li>Get all links</li>
      <li>Filter links with sources</li>
      <li>Process each link <code>loop [1..k]</code>
        <ul>
          <li>Go to link url <code>k</code></li>
          <li>Get all page source</li>
          <li>Filter out source code</li>
          <li>Generate file name</li>
          <li>Write source to file</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>Pretty clear, right? Let’s code it sequentially.</p>

<h4 id="implementation">Implementation</h4>

<ul>
  <li><em>Run browser</em> and <em>Open facebook url</em></li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nf">web/set-driver!</span> <span class="p">{</span><span class="ss">:browser</span> <span class="ss">:firefox</span><span class="p">}</span> <span class="s">&quot;http://facebook.com&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li><em>Login to facebook</em></li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nf">web/input-text</span> <span class="s">&quot;#email&quot;</span> <span class="nv">username</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">web/input-text</span> <span class="s">&quot;#pass&quot;</span> <span class="nv">password</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">web/submit</span> <span class="s">&quot;#pass&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li><em>Go to scoreboard page</em></li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nf">web/to</span> <span class="s">&quot;https://www.facebook.com/hackercup/scoreboard?round=185564241586420&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li><em>Process each page</em></li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">doseq </span><span class="p">[</span><span class="nv">page-num</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="p">(</span><span class="nb">inc </span><span class="mi">114</span><span class="p">))]</span>
</span><span class="line">  <span class="p">(</span><span class="nf">process-page</span> <span class="nv">page-num</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Number of pages is hardcoded. It’s ok.
What is <code>process-page</code> method?</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">process-page</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">url</span> <span class="p">(</span><span class="nb">str </span><span class="s">&quot;https://www.facebook.com/hackercup/scoreboard?round=185564241586420&amp;page=&quot;</span> <span class="nv">n</span><span class="p">)]</span>
</span><span class="line">    <span class="p">(</span><span class="nf">web/to</span> <span class="nv">url</span><span class="p">)</span>
</span><span class="line">    <span class="p">(</span><span class="nb">doseq </span><span class="p">[</span><span class="nv">e</span> <span class="p">(</span><span class="nf">web/find-elements</span> <span class="p">{</span><span class="ss">:css</span> <span class="s">&quot;a&quot;</span><span class="p">})</span>
</span><span class="line">            <span class="ss">:let</span> <span class="p">[</span><span class="nv">url</span> <span class="p">(</span><span class="nf">c/attribute</span> <span class="nv">e</span> <span class="s">&quot;href&quot;</span><span class="p">)]</span>
</span><span class="line">            <span class="ss">:when</span> <span class="p">(</span><span class="nb">and </span><span class="nv">url</span> <span class="p">(</span><span class="nf">.startsWith</span> <span class="nv">url</span> <span class="s">&quot;https://fbcdn-dragon-a.akamaihd.net/&quot;</span><span class="p">))]</span>
</span><span class="line">      <span class="p">(</span><span class="nf">process-url</span> <span class="nv">url</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>First of all,  we concat scoreboard link with page number to get actual link to each page.
Then we go to that page obtain all <code>a</code> elements, get their <code>href</code> values and filter
to save only ones that contain source code.</p>

<ul>
  <li><em>Process each url</em></li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">process-url</span> <span class="p">[</span><span class="nv">url</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">source-code</span> <span class="p">(</span><span class="ss">:body</span> <span class="p">(</span><span class="nf">http/get</span> <span class="nv">url</span><span class="p">))</span>
</span><span class="line">        <span class="nv">file-name</span> <span class="p">(</span><span class="nf">generate-filename</span> <span class="nv">url</span><span class="p">)]</span>
</span><span class="line">    <span class="p">(</span><span class="nf">spit</span> <span class="nv">file-name</span> <span class="nv">source-code</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>In this part we obtain html source of url and get its <code>:body</code> tag.
As all source urls contain just plain text, we don’t need additional
filtering. Just save it to file.</p>

<ul>
  <li><em>Generate file name</em></li>
</ul>

<p>I don’t want to name file as url. That’s why for naming we use following
function: <code>timestamp + underscore + absolute value of url hashcode</code></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">generate-filename</span> <span class="p">[</span><span class="nv">url</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="nb">str </span><span class="nv">DIRECTORY</span> <span class="p">(</span><span class="nf">System/currentTimeMillis</span><span class="p">)</span> <span class="s">&quot;_&quot;</span> <span class="p">(</span><span class="nf">math/abs</span> <span class="p">(</span><span class="nf">hash</span> <span class="nv">url</span><span class="p">))</span> <span class="s">&quot;.txt&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><code>DIRECTORY</code> is just <code>def</code> for folder where you want to place all sources.</p>

<p>Whole script source available <a href="https://github.com/mishadoff/clj-statistic-tools/blob/master/src/clj_statistic_tools/fbhackercup2013.clj">here</a></p>

<h4 id="execution">Execution</h4>

<p>To run that script you need to write in clojure REPL
<code>(run "username" "password")</code>, with correct values for <em>username</em> and <em>password</em>, obviously.</p>

<p>It works some time. <em>Some time</em> equals to eight hours on my machine. Long enough.
But it’s ideal time for <em>night crawling</em>!</p>

<p>In the morning I had all work done.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="nv">ls</span> <span class="mi">-1</span> <span class="err">|</span> <span class="nv">wc</span> <span class="nv">-l</span> <span class="o">&amp;&amp;</span> <span class="nv">du</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>prints</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="mi">20348</span>
</span><span class="line"><span class="mi">291120</span>  <span class="nv">.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Good sign. We have more than 20K of source codes with total size almost 300Mb.</p>

<h3 id="analysis">2. Analysis</h3>

<p>Data is good. But no one interested in raw data, so we need process it.</p>

<p>Basically, we need to detect programming language by source file.
No extensions.</p>

<p>You can <a href="https://www.bionicspirit.com/blog/2012/02/09/howto-build-naive-bayes-classifier.html">write your own classifier</a>
or use some existing tool.</p>

<p>I did few-minutes research on this topic and found
<a href="https://github.com/github/linguist">linguist</a> project.
It is written in <em>Ruby</em> and used in <a href="https://gist.github.com/">Gist</a> to
detect snippet language. Exactly what we need!</p>

<p><em>Unfortunately, I do not know ruby. I even could not build and run linguist classifier to
detect language in my files. Rvm, gems and modules driving me crazy. I surrendered.</em></p>

<p>Another solution to use javascript library <a href="http://softwaremaniacs.org/soft/highlight/en/">Highlight.js</a>.
It is used in syntax coloring, but have automatic language detection. Again, javascript and
reading files from filesystem… Don’t tell me about Node.js</p>

<p>I decided to write my own “classifier”. Honestly, it’s just regexp matching mechanism
on common language constructions: keywords, imports, most used functions, etc.</p>

<p>Iterative approach has been used.</p>

<p>Select some popular language construction say <code>#include &lt;iostream&gt;</code> and filter it as <code>C</code>. After filtering
we detect some subset of <code>C</code> language, remove them from all files list and repeat again with another construction.</p>

<p><em>I don’t know how <code>C++</code> different from <code>C</code>, so I accept them both as interchangeable languages but call it <code>C/C++</code>.
By the way, <code>C - C++ = 0</code>, so we assume they are equal.</em></p>

<p>I developed some number of patterns (they can be reviewed
<a href="https://github.com/mishadoff/clj-statistic-tools/blob/master/src/clj_statistic_tools/fbhackercup2013.clj">here</a>)
and processed all gathered source files.</p>

<p>Unfortunately, not all files were processed succesfully. I reviewed approximately 2000 files manually, few
new languages were detected but big amount of them were the crap: input data, binary files, some text information.</p>

<p>I think we don’t lose too much if we say <em>only 99% of files were processed</em>.</p>

<h3 id="a-idstatsa3-statistics"><a id="stats"></a>3. Statistics</h3>

<p><img src="http://i.imgur.com/sWyfLqv.png" alt="" /></p>

<p>If you don’t like this visualization, you can create your own. Here is data:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="nv">C/C++</span>          <span class="mi">10524</span>
</span><span class="line"><span class="nv">Java</span>            <span class="mi">3117</span>
</span><span class="line"><span class="nv">Python</span>          <span class="mi">3102</span>
</span><span class="line"><span class="nv">C#</span>              <span class="mi">1233</span>
</span><span class="line"><span class="nv">PHP</span>              <span class="mi">821</span>
</span><span class="line"><span class="nv">Ruby</span>             <span class="mi">488</span>
</span><span class="line"><span class="nv">Perl</span>             <span class="mi">142</span>
</span><span class="line"><span class="nv">Pascal/Delphi</span>    <span class="mi">136</span>
</span><span class="line"><span class="nv">Javascript</span>       <span class="mi">109</span>
</span><span class="line"><span class="nv">Haskell</span>           <span class="mi">85</span>
</span><span class="line"><span class="nv">Scala</span>             <span class="mi">72</span>
</span><span class="line"><span class="nv">Clojure</span>           <span class="mi">29</span>
</span><span class="line"><span class="nv">Go</span>                <span class="mi">28</span>
</span><span class="line"><span class="nv">Visual</span> <span class="nv">Basic</span>      <span class="mi">19</span>
</span><span class="line"><span class="nv">F#</span>                <span class="mi">12</span>
</span><span class="line"><span class="nv">Scheme</span>             <span class="mi">8</span>
</span><span class="line"><span class="nv">OCaml</span>              <span class="mi">7</span>
</span><span class="line"><span class="nv">Common</span> <span class="nv">Lisp</span>        <span class="mi">6</span>
</span><span class="line"><span class="nv">Lua</span>                <span class="mi">5</span>
</span><span class="line"><span class="nv">Matlab</span>             <span class="mi">4</span>
</span><span class="line"><span class="nv">Cocoa</span>              <span class="mi">3</span>
</span><span class="line"><span class="nv">Groovy</span>             <span class="mi">2</span>
</span><span class="line"><span class="nv">Dart</span>               <span class="mi">2</span>
</span><span class="line"><span class="nv">awk</span>                <span class="mi">1</span>
</span><span class="line"><span class="nv">Powershell</span>         <span class="mi">1</span>
</span><span class="line"><span class="nv">bash</span>               <span class="mi">1</span>
</span><span class="line"><span class="nv">Kotlin</span>             <span class="mi">1</span>
</span><span class="line"><span class="nv">ActionScript</span>       <span class="mi">1</span>
</span><span class="line"><span class="nv">Dylan</span>              <span class="mi">1</span>
</span><span class="line"><span class="nv">--------------------</span>
</span><span class="line"><span class="nv">crap</span>             <span class="mi">192</span>
</span><span class="line"><span class="nb">not </span><span class="nv">detected</span>     <span class="mi">196</span>
</span><span class="line"><span class="nv">--------------------</span>
</span><span class="line"><span class="nv">TOTAL</span>          <span class="mi">20348</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="conclusion">4. Conclusion</h3>

<ul>
  <li>Top 5 was predicted but it’s extremely crazy that C/C++ occur more than 50%</li>
  <li>Python has almost the same amount as Java</li>
  <li>Good occurence of functional languages: Haskell, F#, Scala, Clojure, Ocaml</li>
  <li>29 Clojure files that means there ~10 clojurists.</li>
  <li>Two languages I never heard of:
<a href="http://www.dartlang.org/">Dart</a> and
<a href="http://opendylan.org/">Dylan</a></li>
  <li><em>Parenthesis</em> languages still used: Common Lisp, Scheme and Clojure (of course)</li>
  <li>Respect to matlabists</li>
  <li>Few <em>exotic languages</em> used: awk, powershell, bash</li>
  <li><a href="http://kotlin.jetbrains.org/">Kotlin</a> becomes popular!</li>
</ul>

<p><em>Warning:</em> Do not treat this statistics as real-world pattern. It is a programming competition with
a lot of geeks, they can use all they want. Also do not blame their code for quality. It was created just for
correctness and speed. Pay attention to code quality in production, but always remember:</p>

<blockquote>
  <p>Your code may be elegant, by mine fucking works.</p>

  <p>– <a href="http://omniti.com/seeds/your-code-may-be-elegant">Leon Fayer</a>
<br /></p>
</blockquote>

<p><strong>P.S.</strong> First of all, it is not high-accurate statistics. As I am not
programming guru, I don’t know all possible languages’ constructions
so it is likely that one construction overlapped with another. In that case
only first one will be checked. Ideally, would be good to have language
detecting library in clojure for future analysis. <em>Maybe</em>, I will do it.
Second of all, code presented here is not beautiful, not optimized, have a lot
of hardcode, but it works. Just in the spirit of Facebook Hacker Cup.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clojure Euler: Problem 013]]></title>
    <link href="http://mishadoff.github.com/blog/clojure-euler-problem-013/"/>
    <updated>2013-01-25T16:33:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/clojure-euler-problem-013</id>
    <content type="html"><![CDATA[<blockquote>
  <p>Work out the first ten digits of the sum of the following one-hundred 50-digit numbers.</p>
</blockquote>

<p>Permalink: <a href="http://projecteuler.net/problem=13">http://projecteuler.net/problem=13</a></p>

<!-- more -->

<p><em>Assume, here is a huge amount of digits. In any case, you can always find them in permalink.</em></p>

<p>What is the problem to sum one-hundred numbers?</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">reduce + </span><span class="nv">numbers</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Done.</p>

<p>Are you kidding me? Not so fast. The question is <em>what type of number you must choose</em>
to sum all these numbers. <code>int</code>? <code>long</code>? <code>looooong</code>? <code>super long long</code>?</p>

<p>Technique to sum very long numbers called
<a href="http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic">Bignum arithmetic</a>.
To solve that problem you just need to implement this technique… or use already implemented.</p>

<p>Java (<em>yeah we talking about it</em>) support long arithmetics with
<a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html">BigInteger</a>.
And clojure does.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">reduce + </span><span class="p">(</span><span class="nb">map </span><span class="nv">bigint</span> <span class="nv">numbers</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>With that function you’ll get the big number.
Just truncate first 10 digits and you are good.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">apply str </span><span class="p">(</span><span class="nb">take </span><span class="mi">10</span> <span class="p">(</span><span class="nb">str </span><span class="p">(</span><span class="nb">reduce + </span><span class="p">(</span><span class="nb">map </span><span class="nv">bigint</span> <span class="nv">numbers</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>(for [i “<a href="https://github.com/mishadoff/project-euler/blob/master/src/project_euler/problem013.clj">GitHub</a>”] i)</p>

<p><strong>P.S.</strong> Ideally, last line should be wrapped
with <code>(read-string ...)</code> to produce number type. But we using
manual submission, so it is fair.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clojure Euler: Problem 012]]></title>
    <link href="http://mishadoff.github.com/blog/clojure-euler-problem-012/"/>
    <updated>2013-01-22T19:45:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/clojure-euler-problem-012</id>
    <content type="html"><![CDATA[<blockquote>
  <p>What is the value of the first triangle number to have over five hundred divisors?</p>
</blockquote>

<p>Permalink: <a href="http://projecteuler.net/problem=12">http://projecteuler.net/problem=12</a></p>

<!-- more -->

<blockquote>
  <p>The sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28.</p>

  <p>The first ten terms would be:</p>

  <p>1, 3, 6, 10, 15, 21, 28, 36, 45, 55, …</p>

  <p>Let us list the factors of the first seven triangle numbers:</p>
</blockquote>

<pre><code> 1: 1
 3: 1,3
 6: 1,2,3,6
10: 1,2,5,10
15: 1,3,5,15
21: 1,3,7,21
28: 1,2,4,7,14,28
</code></pre>

<blockquote>
  <p>We can see that 28 is the first triangle number to have over five divisors.</p>

  <p>What is the value of the first triangle number to have over five hundred divisors?</p>
</blockquote>

<p>When we see infinite sequence of some numbers, first thing that we do is implement it
with using <em>lazy sequences</em>. Simple explanation and example for Fibonacci numbers
can be found in <a href="http://mishadoff.github.com/blog/clojure-euler-problem-002">Clojure Euler: Problem 002</a>.</p>

<p>We have an easy case, so we implement triangle number as
sum of all integers below:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">triangle-number</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="nb">reduce + </span><span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="p">(</span><span class="nb">inc </span><span class="nv">n</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Don’t miss the possibility reduce complexity from <code>O(n)</code> to <code>O(1)</code>.
Just apply <a href="http://en.wikipedia.org/wiki/Arithmetic_progression">arithmetic progression</a> formula.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">triangle-number</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)</span> <span class="mi">2</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Okey, we did small optimization (<em>not so small</em>) here and we have a function that calculates
triangle number for <code>n</code>. Let’s find all of them!</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="k">def </span><span class="nv">triangles</span> <span class="p">(</span><span class="nb">map </span><span class="nv">triangle-number</span> <span class="p">(</span><span class="nb">iterate inc </span><span class="mi">1</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><code>triangles</code> refers to lazy sequence of <em>triangle numbers</em>.</p>

<blockquote>
  <p>Do not evaluate lazy seqs!</p>
</blockquote>

<p>Use limit functions as <code>take</code>, <code>take-while</code>, <code>drop</code>, <code>drop-while</code> to test the
sequence values, or build other lazy seqs with <code>filter</code>, <code>map</code>, etc.</p>

<p>Now, we need a function to calculate number of divisors.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">num-of-divisors</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="nb">* </span><span class="mi">2</span> <span class="p">(</span><span class="nb">count </span><span class="p">(</span><span class="nb">filter </span><span class="o">#</span><span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">mod</span> <span class="nv">n</span> <span class="nv">%</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nb">range </span><span class="mi">2</span> <span class="p">(</span><span class="nb">inc </span><span class="p">(</span><span class="nb">int </span><span class="p">(</span><span class="nf">sqrt</span> <span class="nv">n</span><span class="p">))))))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>If we remember <a href="http://mishadoff.github.com/blog/clojure-euler-problem-003">Clojure Euler: Problem 003</a>
then we know that using <code>sqrt(n)</code> instead of <code>n</code> as upper bound for divisors
saves much time.
Don’t forget mutiply that value by two, as you skip number after <code>sqrt(n)</code>.</p>

<p>Last step: to calculate number over 500 divisors</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">first </span><span class="p">(</span><span class="nb">drop-while </span><span class="o">#</span><span class="p">(</span><span class="nb">&lt; </span><span class="p">(</span><span class="nf">num-of-divisors</span> <span class="nv">%</span><span class="p">)</span> <span class="mi">500</span><span class="p">)</span> <span class="nv">triangles</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We got the result, but spent ~11 secs. Too much.</p>

<p><em>How can we improve our solution?</em></p>

<p>There is theorem about
<a href="http://en.wikipedia.org/wiki/Integer_factorization#Prime_decomposition">Prime Factorization</a>
states:</p>

<blockquote>
  <p>Every positive integer has a unique prime factorization</p>
</blockquote>

<p>For example: 15 = 3^1 * 5^1, 18 = 2^1 * 3^2 and so on.</p>

<p>Not hard to see that number of divisors from such factorization can be obtained
by multiplying all prime powers incremented by one.</p>

<p>For example number 18 have 6 divisors (1, 2, 3, 6, 9, 18).
If we take factorization 18 = 3^1 * 5^1, then number of divisors is
equal to (1 + 1) * (2 + 1) = 6. You see, the same.
Not hard to prove this theorem or
<a href="http://en.wikipedia.org/wiki/Fundamental_theorem_of_arithmetic#Proof">read the proof</a>.</p>

<p>Stop math, we need to code, so let’s code that.</p>

<p>First of all, we need factorization method:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">factorize</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="k">loop </span><span class="p">[</span><span class="nv">x</span> <span class="nv">n</span> <span class="p">[</span><span class="nv">p</span> <span class="o">&amp;</span> <span class="nv">ps</span><span class="p">]</span> <span class="nv">primes</span> <span class="nv">factors</span> <span class="p">[]]</span>
</span><span class="line">    <span class="p">(</span><span class="nb">cond </span><span class="p">(</span><span class="nb">= </span><span class="mi">1</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">factors</span>
</span><span class="line">          <span class="p">(</span><span class="nb">zero? </span><span class="p">(</span><span class="nf">mod</span> <span class="nv">x</span> <span class="nv">p</span><span class="p">))</span> <span class="p">(</span><span class="nf">recur</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">x</span> <span class="nv">p</span><span class="p">)</span> <span class="nv">primes</span> <span class="p">(</span><span class="nb">conj </span><span class="nv">factors</span> <span class="nv">p</span><span class="p">))</span>
</span><span class="line">          <span class="ss">:else</span> <span class="p">(</span><span class="nf">recur</span> <span class="nv">x</span> <span class="nv">ps</span> <span class="nv">factors</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>It uses <code>primes</code> from <code>clojure.contrib.lazy-seqs</code>.
This method prints all factors (<em>including duplicates</em>) for <code>n</code>.</p>

<p>For example:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nf">factorize</span> <span class="mi">18</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>But instead of actual values of divisors, we just need their count.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">factorize-count</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="nb">reduce * </span><span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="nb">comp inc </span><span class="nv">count</span><span class="p">)</span> <span class="p">(</span><span class="nb">vals </span><span class="p">(</span><span class="nf">group-by</span> <span class="nb">identity </span><span class="p">(</span><span class="nf">factorize</span> <span class="nv">n</span><span class="p">))))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Calculate the result again:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">first </span><span class="p">(</span><span class="nb">drop-while </span><span class="o">#</span><span class="p">(</span><span class="nb">&lt; </span><span class="p">(</span><span class="nf">factorize-count</span> <span class="nv">%</span><span class="p">)</span> <span class="mi">500</span><span class="p">)</span> <span class="nv">triangles</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Bingo! It gives the correct result in less than 3 seconds.
Not bad as improvement.</p>

<p><strong>P.S.</strong> If you test-addicted person, you, probably, point out
that function <code>num-of-divisors</code> yields incorrect result for input <code>1</code>.
We can live with that, because our needed number is much greater than 1.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Critical Software Bugs: Part 1]]></title>
    <link href="http://mishadoff.github.com/blog/critical-software-bugs-part-1/"/>
    <updated>2013-01-20T18:48:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/critical-software-bugs-part-1</id>
    <content type="html"><![CDATA[<p>Little journey through the history of most critical software bugs
with some code examples.</p>

<p><em>Do not try to reproduce any of these!</em></p>

<!-- more -->

<h3 id="intro">Intro</h3>

<blockquote>
  <p>Every last bug is the last but one.</p>
</blockquote>

<p><strong>Bugs</strong> are bad. Some of them cause uncomfortable work, more actions
than expected, inconsistency, layout issues, etc.
Some of them “<a href="http://en.wikipedia.org/wiki/Undocumented_feature">not a bug</a>” at all.</p>

<p><strong>Bad bugs</strong> much worse. They cause data corruption, invalid data representation,
unavailability to perform action, losing integrity and so on.</p>

<p>There are <strong>critical bugs</strong> with painful consequences. They can damage the health, nature, people
break buildings, technics. Theoretically, they
<a href="http://www.washingtonpost.com/wp-srv/inatl/longterm/coldwar/shatter021099b.htm">can lead to World War III</a>.
Hope, it’s just theoretically.</p>

<p>If you are software engineer, you definitely will commit the bugs. No panacea.
But if we aware about common mistakes, then less likely we make that mistakes.</p>

<p>This article is review of famous most critical software bugs
including brief history, consequences, root causes, possible solutions, code examples and some advices.</p>

<h3 id="mariner-1httpenwikipediaorgwikimariner1-1962"><a href="http://en.wikipedia.org/wiki/Mariner_1">Mariner 1</a> (1962)</h3>

<p><strong>History:</strong>
In 1962, spacecraft <em>Mariner 1</em> was guided by computer program with error causes
racket do not follow its expected trajectory. To prevent tragic consequences, racket
was destoyed immediately.</p>

<p><strong>Consequences:</strong> Money, $18 million.</p>

<p><strong>Reason:</strong>
There are tons of versions about what type of error it was, but official version
is <em>missing hyphen</em> (‘-‘) in program. Maybe it’s just a myth for publicity,
but, anyway, if the reason of bug is incorrect handwritten formula transcription
from paper to computer, it’s sad.</p>

<p>Probably, the root cause of that is writer and computer operator were different people.
It’s common case for that times. <em>Programming</em> was synonym to the <em>scientific calculations</em> not
an enterprise, as nowadays. That’s why scientist, programmer, and operator could be
different people.</p>

<p>Related story, it’s why zero symbol has a period or diagonal line inside - to prevent
confusing with “big O” for “typer” person. Just compare <code>0</code> and <code>O</code>.</p>

<p><strong>Solution:</strong>
It’s hardly can be a problem today (as it was 50 years ago), but if you write for somebody on the paper, write it accurate.
If you type into computer from someone’s paper sheet, check, re-check and double re-check
what you typing. Ask if you have concerns. Especially, if it is the program for spaceship.</p>

<p>In very <em>far-fetched</em> example missing minus sign can result into invalid computation:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kt">double</span> <span class="nf">getDiscountPercent</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">    <span class="k">return</span> <span class="mf">0.25</span><span class="o">;</span> <span class="c1">// instead of return -0.25;</span>
</span><span class="line"><span class="o">}</span>
</span><span class="line">
</span><span class="line"><span class="kt">double</span> <span class="nf">calculatePrice</span><span class="o">(</span><span class="kt">double</span> <span class="n">initial</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">    <span class="k">return</span> <span class="n">initial</span> <span class="o">*</span> <span class="o">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">getDiscountPercent</span><span class="o">());</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>That way instead of paying $75, you pay $125.</p>

<p><strong>Lesson:</strong> Always check your manual rewriting actions.</p>

<h3 id="siberian-pipeline-sabotagehttpenwikipediaorgwikisiberianpipelinesabotage-1982"><a href="http://en.wikipedia.org/wiki/Siberian_pipeline_sabotage">Siberian pipeline sabotage</a> (1982)</h3>

<p><strong>History:</strong> Cold war. Soviet Union steal technology for managing gas pipelines from Canada. This
technology intentionally contained the bug (<a href="http://en.wikipedia.org/wiki/Logic_bomb">Logic Bomb</a>), developed by CIA
for sabotage purposes. Bomb triggered.</p>

<p><strong>Consequences:</strong> The greatest non-nuclear explosion in the world.</p>

<p><strong>Reason:</strong> Every microship from stolen technology would
work fine just for 10 million cycles, after that switches to another mode.</p>

<p>They <em>used someone’s code</em>.</p>

<p><strong>Solution:</strong></p>

<blockquote>
  <p>You shall not steal</p>

  <p>– <a href="http://en.wikipedia.org/wiki/Ten_Commandments">Ten Commandments</a></p>
</blockquote>

<p>Honestly, if someone’s technology used for critical areas, like gas
transportation, it must be reviewed and tested. 100 times.</p>

<p>Story can be translated as:</p>

<p>I found memory card on the city dump.
Card contained one shell script <code>please-execute-me.sh</code>.
I <em>executed</em> it. System crashed. Who’s guilty? Just me.</p>

<p>Use software from trusted sources.</p>

<p>In modern software world, we often use someone’s libraries, frameworks,
APIs to build our own applications. We <em>expect</em> that code is <em>reviewed</em> and <em>tested</em>.
If not, we can help to do it. How we can be sure these libs without logic bombs?</p>

<p>Trust or review the sources. That’s why I love open source software.</p>

<p>Logic bomb detection is not that hard. Just find the code that causes error
and see the reason of that error. Again, code review helps <em>to prevent</em> the
logic bomb instead of <em>fixing it</em>. Build application to production only from
version control system (<em>which is controlled, right?</em>)</p>

<p>Just for educational purposes: simple example of time-triggered logic bomb</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LogicBombRunner</span> <span class="o">{</span>
</span><span class="line">        <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">                <span class="n">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">LogicBomb</span><span class="o">());</span>
</span><span class="line">                <span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class="line">        <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span><span class="line">
</span><span class="line"><span class="kd">class</span> <span class="nc">LogicBomb</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>
</span><span class="line">
</span><span class="line">        <span class="kd">private</span> <span class="kt">long</span> <span class="n">toStop</span><span class="o">;</span>
</span><span class="line">        <span class="kd">private</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">TIME_TO_TRIGGER</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">100</span><span class="o">;</span>
</span><span class="line">
</span><span class="line">        <span class="kd">public</span> <span class="nf">LogicBomb</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">                <span class="n">toStop</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">+</span> <span class="n">TIME_TO_TRIGGER</span><span class="o">;</span>
</span><span class="line">        <span class="o">}</span>
</span><span class="line">
</span><span class="line">        <span class="nd">@Override</span>
</span><span class="line">        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">                <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">                        <span class="k">if</span> <span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">toStop</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">                                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;System works fine.&quot;</span><span class="o">);</span>
</span><span class="line">                                <span class="k">try</span> <span class="o">{</span>
</span><span class="line">                                        <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
</span><span class="line">                                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">                                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class="line">                                <span class="o">}</span>
</span><span class="line">                        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class="line">                                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Logic bomb triggered.&quot;</span><span class="o">);</span>
</span><span class="line">                                <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">();</span>
</span><span class="line">                        <span class="o">}</span>
</span><span class="line">                <span class="o">}</span>
</span><span class="line">        <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Yes. It throws <code>RuntimeException</code> after approximately 100 days from <code>LogicBomb</code> object creation.</p>

<p><strong>Lesson:</strong> Do not steal. Trust to very limited circle of people.</p>

<h3 id="therac-25httpenwikipediaorgwikitherac-25-1985---1987"><a href="http://en.wikipedia.org/wiki/Therac-25">Therac-25</a> (1985 - 1987)</h3>

<p><strong>History:</strong> Therac-25 was a medical device for radiation therapy.
It could deliver either beta-particles or X-rays. Unfortunately,
operating system for controling the device was written with error,
that causes sad results.</p>

<p><strong>Consequences:</strong> At least 2 patients died, 4 patients were given overdose,
approximately 100 times intended dose.</p>

<p><strong>Reason:</strong> Investigation concluded the common reason was a
<em>bad software design</em>, <em>development practices</em> and a <em>set of bugs</em>
instead of some particular critical bug.</p>

<p>These bad practices and bugs include:</p>

<ul>
  <li>No code review</li>
  <li>Poor exception handling</li>
  <li>No integration testing until device was assembled in the hospital</li>
  <li>Poor hardware design</li>
  <li><em>Bad code</em> reuse</li>
  <li>Concurrency issues</li>
</ul>

<p><strong>Solution:</strong> Code review its a must. Even if you working
alone in the team, show sources to some your friend (programmer).
Two pair of eyes can spot the mistake two times more.</p>

<p><em>Poor exception handling</em>. If failure occurs, no one knows about that failure.
Never handle exception like that:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="k">catch</span> <span class="o">(</span><span class="n">SomeException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>In 99% there are must be a proper handling. If you don’t know how
to handle, rethrow it, possible with wrapping:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="k">catch</span> <span class="o">(</span><span class="n">SomeException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">   <span class="k">throw</span> <span class="k">new</span> <span class="nf">SpecificException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Much better to throw responsibility for handling one level up
in method signature:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kt">void</span> <span class="nf">method</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">SomeException</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>If your real intention to left catch block empty, say this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="k">catch</span> <span class="o">(</span><span class="n">SomeExcpetion</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">  <span class="c1">// swallowing this exception is intended</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><em>Bad code reuse</em>. <a href="http://en.wikipedia.org/wiki/Code_reuse">Code reuse</a> is a good thing.
Except the case when you reuse something with errors.</p>

<p>For example, I have following method for testing if number is even in some of my
previous projects (<em>yes, look at your code that was written few years ago</em>):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isEven</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">    <span class="k">return</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">1</span><span class="o">;</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This method returns incorrect result <code>true</code> for all negative odd numbers. Just because
<code>%</code> operator returns <code>-1</code> except <code>1</code> for negative numbers. Better do <em>NOT</em> reuse such method.
Just write new. And replace old method immediately.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isEven</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">    <span class="k">return</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">;</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><em>Concurrency</em>. Software world hardest issues are concurrency issues.</p>

<blockquote>
  <p>You have a problem and decide to use threads.
Two now problems have you.</p>

  <p>– Some guy from internet
<br /></p>
</blockquote>

<blockquote>
  <p>You have a problem and decide to use locks.
Now you have</p>

  <p>– Some another guy from internet</p>
</blockquote>

<p>If you know that some object will be shared between threads, one solution to
add <code>synchronized</code> (<a href="http://en.wikipedia.org/wiki/Monitor_%28synchronization%29">Monitor object</a>)
to each read/write state method. It will slow
your work with that object but prevent a lot of unexpected errors.</p>

<p>Although, there are much flexible synchronization mechanisms in java that
plain old <code>synchronized</code> as <a href="http://en.wikipedia.org/wiki/Semaphore_%28programming%29">semaphores</a>,
<a href="http://en.wikipedia.org/wiki/Mutual_exclusion">mutexes</a>,
<a href="http://en.wikipedia.org/wiki/Read_write_lock_pattern">read-write locks</a>.</p>

<p>I reccomend to use java package <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html">java.util.concurrent</a>.
It consists of a lot of concurrency techniques, like <code>Synchronizers</code>, <code>Executors</code>,
<code>Atomics</code>, <code>Concurrent Collections</code>, <code>Futures</code>, <code>Callbacks</code> etc.</p>

<p><strong>As a bonus:</strong> Good books about concurrency in Java:</p>

<ul>
  <li><a href="http://www.goodreads.com/book/show/127932.Java_Concurrency_in_Practice">Java Concurrency in Practice</a></li>
  <li><a href="http://www.goodreads.com/book/show/629608.Concurrent_Programming_in_Java">Concurrent Programming in Java</a></li>
</ul>

<p><strong>Lesson:</strong> Always handle exceptions. Pay more attention to concurrency issues.</p>

<h3 id="patriot-missilehttpenwikipediaorgwikimim-104patriot-1991"><a href="http://en.wikipedia.org/wiki/MIM-104_Patriot">Patriot Missile</a> (1991)</h3>

<p><strong>History:</strong> In 1991, American battery fired Patriot Missile to intercept Iraq missile.
Interception failed because of system bug in time step calculation.
Iraq missile destroyed an American Army barracks.</p>

<p><strong>Consequences:</strong> 28 soldiers died, 100 injured.</p>

<p><strong>Reason:</strong> Floating point rounding error. System’s internal clock was calculating
time by 0.1 seconds step (0.1, 0.2, 0.3, …). As <code>0.1 = 1/10</code> have infinite binary representation
<code>0.0001100110011001100110011001100110011001100110011001100..</code>
and for this calculation 24-bit register was used,
register hold just <code>0.00011001100110011001100</code> introducing truncating error
<code>0.00000000000000000000000110011</code> what is approximately <code>0.0000001</code> in decimal.</p>

<p>Small enough, huh?</p>

<p>Not really, Multiplying this number for 100 hours gives:</p>

<pre><code>0.0000001 * 100 * 60 * 60 * 10 = 0.36 sec
</code></pre>

<p>During that time Iraq missile travels a half kilometer, and was out of tracking radius
for Patriot Missile. Bad things happen.</p>

<p><strong>Solution:</strong> Floats are very error-prone if we don’t handle them correctly.</p>

<p>Predict the output of the following code:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="k">for</span> <span class="o">(</span><span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span> <span class="n">d</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="o">;</span> <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="mf">0.1</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Iteration&quot;</span><span class="o">);</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Infinite loop. The same problem as described above.</p>

<p>One solution is to use float that have exact binary representation.
<code>0.125</code>, <code>0.25</code>, <code>0.5</code> for example.
But this greatly reduces the space of allowed values and give less flexibility.</p>

<p>Another solution to use big decimal or ratio types.
Java, as example, have out-of-the-box <code>BigDecimal</code> class. Loop above rewritten with
that class works as expected:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">BigDecimal</span> <span class="n">init</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&quot;0.0&quot;</span><span class="o">);</span>
</span><span class="line"><span class="n">BigDecimal</span> <span class="n">bound</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&quot;1.0&quot;</span><span class="o">);</span>
</span><span class="line"><span class="n">BigDecimal</span> <span class="n">step</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&quot;0.1&quot;</span><span class="o">)</span>
</span><span class="line">
</span><span class="line"><span class="k">for</span> <span class="o">(</span><span class="n">BigDecimal</span> <span class="n">d</span> <span class="o">=</span> <span class="n">init</span><span class="o">;</span> <span class="o">!</span><span class="n">d</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">bound</span><span class="o">);</span> <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">step</span><span class="o">))</span> <span class="o">{</span>
</span><span class="line">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d</span><span class="o">);</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>One disadvantage it has slower execution than with floats. Consider trade-off
between time and accuracy. If human lives on the stake, it’s not relevant choice.</p>

<p><code>Ratio</code> class can be defined without any problems and used similar way.</p>

<p><strong>Lesson:</strong> If you need very accurate calculations use big decimals or ratios.</p>

<h3 id="mars-climate-orbiterhttpenwikipediaorgwikimarsclimateorbiter-1998"><a href="http://en.wikipedia.org/wiki/Mars_Climate_Orbiter">Mars Climate Orbiter</a> (1998)</h3>

<p><strong>History:</strong> Again about space. In 1998, communication with Mars Climate Orbiter
was lost, because of changed trajectory. Space probe was crashed near Mars.</p>

<p><strong>Consequences:</strong> Money, $327 million</p>

<p><strong>Reason:</strong> Navigation system design was developed by another team.
To represent Force they used <a href="http://en.wikipedia.org/wiki/Pound-force">pound-force</a>
from <a href="http://en.wikipedia.org/wiki/Imperial_units">Imperial units</a>
instead of <a href="http://en.wikipedia.org/wiki/Newton_%28unit%29">Newton</a>
from <a href="http://en.wikipedia.org/wiki/Metric_system">metric system</a>.</p>

<pre><code>1 Newton = 0.22 pound-force
</code></pre>

<p>Without provided conversion between them system failed.</p>

<p>Issue resemble to using dates in different timezones, but much more critical.</p>

<p><strong>Solution:</strong> First of all, at least one science-aware person must perform code review.
At least for code blocks with formulas and calculations. If there are comments about using pound-force,
the problem easy spotted. Second of all, received code must be tested on model
instead of physical machine. This is also, likely, detects the issue.
Developer who wrote that less guilty, but still guilty.</p>

<p>There are different approaches to implement this in java:</p>

<p>very bad approach, we don’t know what units are used:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="k">new</span> <span class="nf">Force</span><span class="o">(</span><span class="mf">1.533</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>better (still bad) approach to indicate with comment:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="c1">// force in Newtons!</span>
</span><span class="line"><span class="k">new</span> <span class="nf">Force</span><span class="o">(</span><span class="mf">1.533</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>better (still bad) approach to indicate different constructors for different units:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="k">new</span> <span class="nf">ForceInNewtons</span><span class="o">(</span><span class="mf">1.533</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>I prefer approach where you specifies a <em>value</em> and <em>unit</em> in the constructor, and
they converted to something common unit (metric) convenient for use in internal representation:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kd">enum</span> <span class="n">ForceUnit</span> <span class="o">{</span>
</span><span class="line">  <span class="n">NEWTON</span><span class="o">,</span>
</span><span class="line">  <span class="n">POUND_FORCE</span>
</span><span class="line"><span class="o">}</span>
</span><span class="line">
</span><span class="line"><span class="k">new</span> <span class="nf">Force</span><span class="o">(</span><span class="mf">1.533</span><span class="o">,</span> <span class="n">ForceUnit</span><span class="o">.</span><span class="na">NEWTON</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>A bit more code, but it is understandable and easy to use for different unit systems.
Unit conversion method can be defined either at the <code>enum ForceUnit</code> or <code>class Force</code> level.</p>

<p><strong>Lesson:</strong> Always explicitly indicate what units used in your code.</p>

<p><em>To be continued.</em></p>

<h3 id="links">Links</h3>

<ul>
  <li><a href="http://en.wikipedia.org/wiki/List_of_software_bugs">List of Software Bugs</a></li>
  <li><a href="http://www5.in.tum.de/~huckle/bugse.html">Collection of Software Bugs</a></li>
  <li><a href="http://www.wired.com/software/coolapps/news/2005/11/69355?currentPage=all">History’s Worst Software Bugs</a></li>
  <li><a href="http://www.sundoginteractive.com/sunblog/posts/top-ten-most-infamous-software-bugs-of-all-time">Top Ten Most Infamous Software Bugs Of All Time</a></li>
  <li><a href="http://nssdc.gsfc.nasa.gov/nmc/spacecraftDisplay.do?id=MARIN1">NASA Mariner 1</a></li>
  <li><a href="http://www.wired.com/culture/lifestyle/news/2004/03/62806">Soviets Burned By CIA Hackers?</a></li>
  <li><a href="http://courses.cs.vt.edu/cs3604/lib/Therac_25/Therac_1.html">An Investigation of the Therac-25 Accidents</a></li>
  <li><a href="http://seeri.etsu.edu/SECodeCases/ethicsC/PatriotMissile.htm">An Analysis of the Patriot Missile System</a></li>
  <li><a href="http://www.ima.umn.edu/~arnold/disasters/patriot.html">The Patriot Missile Failure</a></li>
  <li><a href="http://www.tysknews.com/Depts/Metrication/mystery_of_orbiter_crash_solved.htm">Mystery of Orbiter Crash Solved</a></li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clojure Euler: Problem 011]]></title>
    <link href="http://mishadoff.github.com/blog/clojure-euler-problem-011/"/>
    <updated>2013-01-18T13:45:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/clojure-euler-problem-011</id>
    <content type="html"><![CDATA[<blockquote>
  <p>What is the greatest product of four adjacent numbers in the same
direction (up, down, left, right, or diagonally) in the 20 x 20 grid?</p>
</blockquote>

<p>Permalink: <a href="http://projecteuler.net/problem=11">http://projecteuler.net/problem=11</a></p>

<!-- more -->

<blockquote>
  <p>In the 20 x 20 grid below, four numbers along a diagonal
line have been enclosed into square brackets</p>
</blockquote>

<pre><code>08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08
49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00
81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65
52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91
22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80
24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50
32 98 81 28 64 23 67 10[26]38 40 67 59 54 70 66 18 38 64 70
67 26 20 68 02 62 12 20 95[63]94 39 63 08 40 91 66 49 94 21
24 55 58 05 66 73 99 26 97 17[78]78 96 83 14 88 34 89 63 72
21 36 23 09 75 00 76 44 20 45 35[14]00 61 33 97 34 31 33 95
78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92
16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57
86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58
19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40
04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66
88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69
04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36
20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16
20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54
01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48
</code></pre>

<blockquote>
  <p>The product of these numbers is 26 * 63 * 78 * 14 = 1788696.</p>

  <p>What is the greatest product of four adjacent numbers in the
same direction (up, down, left, right, or diagonally) in the 20 x 20 grid?</p>
</blockquote>

<p>First step is pretty routine, we need to create such grid representation
in our program from file. For the way how we read files refer
<a href="http://mishadoff.github.com/blog/clojure-euler-problem-008">Clojure Euler: Problem 008</a>, we have
similar problem there.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">get-matrix</span> <span class="p">[]</span>
</span><span class="line">  <span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nf">Integer/parseInt</span> <span class="p">(</span><span class="nb">apply str </span><span class="nv">%</span><span class="p">))</span>
</span><span class="line">       <span class="p">(</span><span class="nf">partition</span> <span class="mi">2</span> <span class="mi">2</span> <span class="p">(</span><span class="nb">remove </span><span class="o">#</span><span class="p">(</span><span class="nb">or </span><span class="p">(</span><span class="nb">= </span><span class="sc">\n</span><span class="nv">ewline</span> <span class="nv">%</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="sc">\ </span><span class="nv">%</span><span class="p">))</span>
</span><span class="line">                              <span class="p">(</span><span class="nb">seq </span><span class="p">(</span><span class="nb">slurp </span><span class="s">&quot;res/problem011.txt&quot;</span><span class="p">))))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Idea is following: read the file, drop the garbage,
take all two-digit combinations, concat each and transform to the integer.</p>

<p>To make things simple we reading the numbers in one-dimensional list
of size 20 x 20 = 400. We always can use formula to represent two dimensional
indexing for one-dimensional array and vice versa.</p>

<p><em>Example:</em> suppose you need a 3 x 3 matrix <code>A</code></p>

<pre><code>9    2    4
6    1    7
5    3    8
</code></pre>

<p>You can flat it into 1D array <code>B</code></p>

<pre><code>9 2 4 6 1 7 5 3 8
</code></pre>

<p>Now, when you want <code>A[i][j]</code> use the formula <code>i * size_j + j</code>, where <code>size_j</code>
is second matrix dimension. Therefore <code>A[1][2] = B[1 * 3 + 2] = B[5] = 7</code>, what is correct.</p>

<p>Implementing that in clojure gives one indexing function</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">get-at</span> <span class="p">[</span><span class="nv">i</span> <span class="nv">j</span> <span class="nv">matrix</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">and </span><span class="p">(</span><span class="nb">&gt;= </span><span class="nv">i</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">i</span> <span class="mi">20</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;= </span><span class="nv">j</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">j</span> <span class="mi">20</span><span class="p">))</span>
</span><span class="line">    <span class="p">(</span><span class="nb">nth </span><span class="nv">matrix</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">j</span> <span class="p">(</span><span class="nb">* </span><span class="nv">i</span> <span class="mi">20</span><span class="p">)))</span> <span class="mi">0</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We check the boundaries of array inside this function, which can be inappropriate
in many cases, but it is good as we use it in one place.</p>

<p>Ok. We have data, we have methods operate this data, now let’s code logic.
Our good friend - <strong>bruteforce</strong>.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">matrix</span> <span class="p">(</span><span class="nf">get-matrix</span><span class="p">)</span>
</span><span class="line">      <span class="nv">ways</span> <span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">i</span> <span class="p">(</span><span class="nb">range </span><span class="mi">20</span><span class="p">)</span> <span class="nv">j</span> <span class="p">(</span><span class="nb">range </span><span class="mi">20</span><span class="p">)]</span>
</span><span class="line">             <span class="p">[(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nf">get-at</span> <span class="nv">i</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">%</span> <span class="nv">j</span><span class="p">)</span> <span class="nv">matrix</span><span class="p">)</span> <span class="p">(</span><span class="nb">range </span><span class="mi">4</span><span class="p">))</span>
</span><span class="line">              <span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nf">get-at</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">%</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">j</span> <span class="nv">matrix</span><span class="p">)</span> <span class="p">(</span><span class="nb">range </span><span class="mi">4</span><span class="p">))</span>
</span><span class="line">              <span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nf">get-at</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">%</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">%</span> <span class="nv">j</span><span class="p">)</span> <span class="nv">matrix</span><span class="p">)</span> <span class="p">(</span><span class="nb">range </span><span class="mi">4</span><span class="p">))</span>
</span><span class="line">              <span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nf">get-at</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">%</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nb">- </span><span class="nv">j</span> <span class="nv">%</span><span class="p">)</span> <span class="nv">matrix</span><span class="p">)</span> <span class="p">(</span><span class="nb">range </span><span class="mi">4</span><span class="p">))])]</span>
</span><span class="line">    <span class="p">(</span><span class="nb">reduce max </span><span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nb">reduce * </span><span class="nv">%</span><span class="p">)</span> <span class="p">(</span><span class="nb">reduce concat </span><span class="nv">ways</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We iterate on all matrix elements as start of 4-element range.</p>

<p>We have 4 conditions, each of them represents some direction.
All these 4 directions represent all possible direction in grid.</p>

<ol>
  <li>NORTH -&gt; SOUTH (Up &amp; Down covered)</li>
  <li>WEST -&gt; EAST (Left &amp; Right covered)</li>
  <li>NW -&gt; SE (backslash diagonals covered)</li>
  <li>NE -&gt; SW (slash diagonals covered)</li>
</ol>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="nv">S</span>      <span class="nv">S</span> <span class="nb">* * * </span>        <span class="nv">S</span>                  <span class="nv">S</span>
</span><span class="line"><span class="nb">* </span>                      <span class="nb">* </span>               <span class="nv">*</span>
</span><span class="line"><span class="nb">* </span>                       <span class="nb">* </span>             <span class="nv">*</span>
</span><span class="line"><span class="nb">* </span>                        <span class="nb">* </span>           <span class="nv">*</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><em>S is for start</em></p>

<p>If we obtain all possible 4-element ranges for matrix, just find
maximum of product.</p>

<p>Problem solved!</p>

<p><a href="https://github.com/mishadoff/project-euler/blob/master/src/project_euler/problem011.clj">github</a></p>

<p><strong>P.S.</strong> Boring problem.
I think it just for introducing matrices computation.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[DevOps reactions]]></title>
    <link href="http://mishadoff.github.com/blog/devops-reactions/"/>
    <updated>2013-01-13T18:10:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/devops-reactions</id>
    <content type="html"><![CDATA[<p>Just found blog, that illustrates developer feelings with gif-pictures: <a href="http://devopsreactions.tumblr.com/">DevOps reactions</a></p>

<p>It’s really cool idea.</p>

<!-- more -->

<p>Here are the most liked</p>

<h3 id="when-you-review-undocumented-code">When you review undocumented code</h3>

<p><img src="http://i209.photobucket.com/albums/bb315/DJ_Napps/omg.gif" alt="" /></p>

<h3 id="security-hole-will-not-be-fixed-because-product-wants-a-new-feature">Security hole will not be fixed because Product wants a new feature</h3>

<p><img src="http://i.imgur.com/w3Nbr.gif" alt="" /></p>

<h3 id="an-error-notification-comes-in-that-is-related-to-code-you-worked-on">An error notification comes in that is related to code you worked on</h3>

<p><img src="http://i.imgur.com/An059.gif" alt="" /></p>

<h3 id="code-freeze">Code freeze</h3>

<p><img src="http://media.tumblr.com/c888a5fc6db74ba2ba4f5dcb3d13e95b/tumblr_inline_mfrh8jAexq1raprkq.gif" alt="" /></p>

<h3 id="working-on-the-wrong-server">Working on the wrong server</h3>

<p><img src="http://i.imgur.com/da25D.gif" alt="" /></p>

<h3 id="deciding-whether-to-perform-a-risky-breakfix">Deciding whether to perform a risky break/fix</h3>

<p><img src="http://i.imgur.com/SvaAv.gif" alt="" /></p>

<h3 id="finding-an-interesting-side-issue-while-dealing-with-something-else">Finding an interesting side-issue while dealing with something else</h3>

<p><img src="http://www.ohmagif.com/wp-content/uploads/2012/12/please-wait-i-need-to-play-in-the-puddle.gif" alt="" /></p>

<h3 id="reaction-difference-when-something-breaks-and-one-is-on-vacation">Reaction difference when something breaks and one is on vacation</h3>

<p><img src="http://i.imgur.com/c9X6n.gif" alt="" /></p>

<h3 id="typical-lunch-break">Typical lunch break</h3>

<p><img src="http://media.tumblr.com/tumblr_mekc6kZTap1raprkq.gif" alt="" /></p>

<h3 id="how-time-feels-when-participating-in-a-meeting-with-non-technical-people">How time feels when participating in a meeting with non-technical people</h3>

<p><img src="http://i.imgur.com/7xpOF.gif" alt="" /></p>

<h3 id="bonus-holy-war-java-vs-c">Bonus: Holy War (Java vs C#)</h3>

<p><img src="http://i.imgur.com/u9CAo.gif" alt="" /></p>

<p><strong>P.S.</strong> Everyone can submit feeling.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Eclipse Speedup]]></title>
    <link href="http://mishadoff.github.com/blog/eclipse-speedup/"/>
    <updated>2012-12-23T18:00:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/eclipse-speedup</id>
    <content type="html"><![CDATA[<p>Have you been in situation where most of the time in eclipse you were waiting for
some operation to be finished?</p>

<!-- more -->

<p><img src="http://upload.wikimedia.org/wikipedia/en/3/34/Eclipse-logo.png" alt="" /></p>

<p>If you here, probably, the answer is yes. You are bored with that slow functionality and want
to increase eclipse performance to make your development work more comfortable. It is the right thing to do.</p>

<p><em>Warning:</em> Most frequent advice I heard <em>to add more RAM</em>. Probably, you can buy better workstation with better CPU.
Add SSD to make filesystem operations faster. We assume you can’t afford all that. All you can is setup your
eclipse instance. All preferences based on <code>Eclipse SDK Version: 4.3.0 Build id: I20121031-2000</code> for ubuntu, but
almost everything is identical in other versions for other platforms.</p>

<h3 id="eclipse-tweaks">Eclipse tweaks</h3>

<h4 id="plugins">Plugins</h4>

<p>First time I found the power of plugins I was excited. I installed them more and more until I couldn’t
work comfortable with eclipse. Probably, you have a lot of plugins, just <strong>disable</strong> on startup ones that not used.
It is not deleting, you always can enable it back.</p>

<pre><code>Window -&gt; Preferences -&gt; General -&gt; Startup and Shutdown
</code></pre>

<p><img src="http://i.imgur.com/kgavA.png" alt="" /></p>

<p>By the way, some plugins appeared due to your experimenting and not used anymore. <strong>Delete</strong> redundant plugins if they
not used at all.</p>

<pre><code>Help -&gt; About Eclipse SDK -&gt; Instalation Details -&gt; &lt;Select plugin&gt; -&gt; Uninstall
</code></pre>

<p><img src="http://i.imgur.com/7wRoR.png" alt="" /></p>

<h4 id="eclipseini">eclipse.ini</h4>

<p>Following tweaks based on editing <code>eclipse.ini</code> file located in root folder
of your eclipse instalation.</p>

<ul>
  <li><strong>Use specific JVM to run eclipse.</strong>
This allows do not take into account system properties which alters your JDK.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class=""><span class="line">-vm
</span><span class="line">/path/to/your/java</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>
    <p><strong>Use latest JDK to run eclipse.</strong>
Much better if you point your eclipse to the <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">latest JDK</a>.
<em>Rumors</em> said it has better performance.</p>
  </li>
  <li>
    <p><strong>Use Sun JDK to run eclipse.</strong>
The reason behind this has the same explanation.</p>
  </li>
  <li>
    <p><strong>Configure VM arguments.</strong>
You can set your own values for virtual machine if you think
they are appropriate
(<a href="http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#PerformanceTuning">Performance related options</a>)
I use following settings to increase heap size (objects) to <code>768Mb</code> and permgen (classes) to <code>256 Mb</code> on my <code>3Gb</code> RAM machine.</p>
  </li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class=""><span class="line">-vmargs
</span><span class="line">-Xms768m
</span><span class="line">-Xmx768m
</span><span class="line">-XX:PermSize=256m
</span><span class="line">-XX:MaxPermSize=256m</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You can also add <code>-Xverify:none</code> that skips validation of loaded clases to JVM. Due to fact it skips one
step of JVM loading you will get performance boost. But it’s very risky change.</p>

<p>You can also test your eclipse performance  with different Garbage collector strategies, server options,
experimental VM options like (some of these):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class=""><span class="line">-server
</span><span class="line">-XX:+UnlockExperimentalVMOptions
</span><span class="line">-XX:+UseG1GC
</span><span class="line">-XX:+UseParallelGC
</span><span class="line">-XX:+UseFastAccessorMethods
</span><span class="line">-Xss2m</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Check all <a href="http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html">Eclipse runtime options</a>
for reference and choose ones that appropriate for you.</p>

<h4 id="disable-animations">Disable animations</h4>

<p>Animations it’s cool. But I always disable animations if it possible in all tools.
Also, classic theme is most usable for me.</p>

<pre><code>Window -&gt; Preferences -&gt; General -&gt; Appearance -&gt; Uncheck 'Enable animations'
</code></pre>

<p><img src="http://i.imgur.com/mzLp7.png" alt="" /></p>

<h4 id="disable-label-decorations">Disable label decorations</h4>

<p>Label decorations are small icons on project, file, class levels that helps
visually indicate some state of file. Like commited it to git or no.
They are provided by various plugins and rarely useful. Just left ones that you want.</p>

<pre><code>Window -&gt; Preferences -&gt; General -&gt; Appearance -&gt; Label Decorations
</code></pre>

<p><img src="http://i.imgur.com/MKZp5.png" alt="" /></p>

<h4 id="autocompletion">Autocompletion</h4>

<p>Sometimes on slow machines or when you have a lot of classes in your classpath autocompletion performance is terrible.
Small improvement you can get by reducing group of possible proposals. I left only <code>Java Proposals</code> and <code>Template Proposals</code>:</p>

<pre><code>Window -&gt; Preferences -&gt; Java -&gt; Editor -&gt; Content Assist -&gt; Advanced
</code></pre>

<p><img src="http://i.imgur.com/Aa7MY.png" alt="" /></p>

<h4 id="uncheck-validators">Uncheck validators</h4>

<p>If you are sure in your competence just suspend all validators. If problem appears, you always
can identify the reason, but you save your development time.</p>

<pre><code>Window -&gt; Preferences -&gt; Validation -&gt; Suspend All Validators
</code></pre>

<p><img src="http://i.imgur.com/n1XQ2.png" alt="" /></p>

<h4 id="close-unrelated-projects">Close unrelated projects</h4>

<p>If you working in context of few projects, better to have all unrelated projects closed. They won’t appear
in index. You can manually <code>Close unrelated projects</code> in workspace. But I recommend to use <code>Working Set</code>.
You can add any number of projects to one working set, and quickly switch between different working sets
in one workspace.</p>

<pre><code>Right Click on Project -&gt; Assign Working Sets..
</code></pre>

<h4 id="close-unused-tabs-in-editor">Close unused tabs in editor</h4>

<p>Big number of tabs in editor can greatly slow down your performance. Just limit them.</p>

<pre><code>Window -&gt; Preferences -&gt; General -&gt; Editors
</code></pre>

<p>Check <code>Close editors automatically</code> and set <code>Number of opened tabs</code> to <code>10</code>.</p>

<p><img src="http://i.imgur.com/gjRd8.png" alt="" /></p>

<h4 id="disable-spell-check">Disable spell check</h4>

<p>Are you developer or what? I don’t see any reason to have <code>spell check</code> enabled.</p>

<pre><code>Window -&gt; Preferences -&gt; General -&gt; Editors -&gt; Text Editors -&gt; Spelling -&gt; Uncheck 'Enable spell checking'
</code></pre>

<h4 id="disable-autobuild">Disable autobuild</h4>

<p>Probably, you aware about when you want to build your project and when not.</p>

<pre><code>Project -&gt; Uncheck 'Build Automatically'
Window -&gt; Preferences -&gt; Java -&gt; Compiler -&gt; Building -&gt; Uncheck 'Scrub output folders when cleaning'
Window -&gt; Preferences -&gt; Java -&gt; Compiler -&gt; Building -&gt; Uncheck 'Rebuild class files modified by others'
</code></pre>

<h4 id="hotkeys">Hotkeys</h4>

<p>It is human-related advice. Even if you working in super-fast IDE and spend 10 actions to perform
single operation, your development process won’t be fast. Configure most-often used actions
to hotkeys and learn them. You will get a positive feedback after a week of usage.</p>

<pre><code>Windows -&gt; Preferences -&gt; General -&gt; Keys
</code></pre>

<p>To force myself learn all hotkeys I just disabled toolbar.</p>

<pre><code>Window -&gt; Hide Toolbar
</code></pre>

<h3 id="useful-links">Useful Links</h3>

<ul>
  <li><a href="http://wiki.eclipse.org/Eclipse.ini">http://wiki.eclipse.org/Eclipse.ini</a></li>
  <li><a href="http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html">http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html</a></li>
  <li><a href="http://www.beyondlinux.com/2011/06/25/speed-up-your-eclipse-as-a-super-fast-ide/">http://www.beyondlinux.com/2011/06/25/speed-up-your-eclipse-as-a-super-fast-ide/</a></li>
  <li><a href="http://blog.normation.com/2010/05/24/optimizing-eclipse-performances/">http://blog.normation.com/2010/05/24/optimizing-eclipse-performances/</a></li>
  <li><a href="http://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse/1409590#1409590">http://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse/1409590#1409590</a></li>
</ul>

<p><strong>P.S.</strong> This article planned to be updatable, other tweaks are welcome!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clojure Euler: Problem 010]]></title>
    <link href="http://mishadoff.github.com/blog/clojure-euler-problem-010/"/>
    <updated>2012-12-15T00:23:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/clojure-euler-problem-010</id>
    <content type="html"><![CDATA[<blockquote>
  <p>The sum of the primes below 10 is 2 + 3 + 5 + 7 = 17.</p>

  <p>Find the sum of all the primes below two million.</p>
</blockquote>

<p>Permalink: <a href="http://projecteuler.net/problem=10">http://projecteuler.net/problem=10</a></p>

<!-- more -->

<p>We have already worked with prime numbers in
<a href="http://mishadoff.github.com/blog/clojure-euler-problem-003/">Problem 003</a> and
<a href="http://mishadoff.github.com/blog/clojure-euler-problem-007/">Problem 007</a>. We also decided that
the best way to work with prime numbers in clojure to use <code>primes</code> lazy-seq
from <code>clojure.contrib.lazy-seqs</code>.</p>

<p>Gentle reminder: Just add proper <code>:use</code> to your file:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="ss">:use</span> <span class="p">[</span><span class="nv">clojure.contrib.lazy-seqs</span> <span class="ss">:only</span> <span class="p">(</span><span class="nf">primes</span><span class="p">)])</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Then, the simplest problem solution to use <code>take-while</code> stream and <code>reduce</code> for sum:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">reduce + </span><span class="p">(</span><span class="nb">take-while </span><span class="o">#</span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">%</span> <span class="mi">2000000</span><span class="p">)</span> <span class="nv">primes</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Again, one-line solution. Let’s run it.</p>

<p>Finding result on my nachine takes ~12 seconds. Small enough, but maybe somehow it can be improved?</p>

<h3 id="sieve-of-eratosthenes">Sieve of Eratosthenes</h3>

<p><a href="http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a> - ancient algorithm
for finding prime numbers. The best explanation how it works with picture from wiki:</p>

<p><img src="http://upload.wikimedia.org/wikipedia/commons/b/b9/Sieve_of_Eratosthenes_animation.gif" alt="" /></p>

<p>Our first naive implementation:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">sieve-1</span> <span class="p">[]</span>
</span><span class="line">  <span class="p">(</span><span class="k">loop </span><span class="p">[</span><span class="nv">nums</span> <span class="p">(</span><span class="nb">set </span><span class="p">(</span><span class="nb">cons </span><span class="mi">2</span> <span class="p">(</span><span class="nb">range </span><span class="mi">3</span> <span class="mi">2000000</span> <span class="mi">2</span><span class="p">)))</span> <span class="nv">n</span> <span class="mi">3</span><span class="p">]</span>
</span><span class="line">    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="nv">n</span> <span class="mi">2000000</span><span class="p">)</span> <span class="p">(</span><span class="nb">reduce + </span><span class="nv">nums</span><span class="p">)</span>
</span><span class="line">        <span class="p">(</span><span class="nf">recur</span> <span class="p">(</span><span class="nf">clojure.set/difference</span> <span class="nv">nums</span> <span class="p">(</span><span class="nb">set </span><span class="p">(</span><span class="nb">range </span><span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="nv">n</span><span class="p">)</span> <span class="mi">2000000</span> <span class="nv">n</span><span class="p">)))</span> <span class="p">(</span><span class="nb">inc </span><span class="nv">n</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><em>Note:</em> <a href="http://clojuredocs.org/clojure_core/clojure.set/difference">clojure.set/difference</a> function
find the difference between two sets.</p>

<p>This recursive implementation is even worse than our oneliner, it calculates the result in ~24 seconds.</p>

<p>Primary optimisation is to use <code>(* n n)</code> as recursion base instead of <code>n</code>. Because of there are no prime
numbers if we crossed greater than square root of maximum. Problem evolves.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">sieve-2</span> <span class="p">[]</span>
</span><span class="line">  <span class="p">(</span><span class="k">loop </span><span class="p">[</span><span class="nv">nums</span> <span class="p">(</span><span class="nb">set </span><span class="p">(</span><span class="nb">cons </span><span class="mi">2</span> <span class="p">(</span><span class="nb">range </span><span class="mi">3</span> <span class="mi">2000000</span> <span class="mi">2</span><span class="p">)))</span> <span class="nv">n</span> <span class="mi">3</span><span class="p">]</span>
</span><span class="line">    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="nv">n</span><span class="p">)</span> <span class="mi">2000000</span><span class="p">)</span> <span class="p">(</span><span class="nb">reduce + </span><span class="nv">nums</span><span class="p">)</span>
</span><span class="line">        <span class="p">(</span><span class="nf">recur</span> <span class="p">(</span><span class="nf">clojure.set/difference</span> <span class="nv">nums</span> <span class="p">(</span><span class="nb">set </span><span class="p">(</span><span class="nb">range </span><span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="nv">n</span><span class="p">)</span> <span class="mi">2000000</span> <span class="nv">n</span><span class="p">)))</span> <span class="p">(</span><span class="nb">inc </span><span class="nv">n</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>~21 seconds. Still worse.</p>

<p>Why we increment by 1 on recursion call? If we starting our <code>n</code> value from <code>3</code> we don’t need
to go over even numbers.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">sieve-3</span> <span class="p">[]</span>
</span><span class="line">  <span class="p">(</span><span class="k">loop </span><span class="p">[</span><span class="nv">nums</span> <span class="p">(</span><span class="nb">set </span><span class="p">(</span><span class="nb">cons </span><span class="mi">2</span> <span class="p">(</span><span class="nb">range </span><span class="mi">3</span> <span class="mi">2000000</span> <span class="mi">2</span><span class="p">)))</span> <span class="nv">n</span> <span class="mi">3</span><span class="p">]</span>
</span><span class="line">    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="nv">n</span><span class="p">)</span> <span class="mi">2000000</span><span class="p">)</span> <span class="p">(</span><span class="nb">reduce + </span><span class="nv">nums</span><span class="p">)</span>
</span><span class="line">        <span class="p">(</span><span class="nf">recur</span> <span class="p">(</span><span class="nf">clojure.set/difference</span> <span class="nv">nums</span> <span class="p">(</span><span class="nb">set </span><span class="p">(</span><span class="nb">range </span><span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="nv">n</span><span class="p">)</span> <span class="mi">2000000</span> <span class="nv">n</span><span class="p">)))</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="mi">2</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>~13 seconds. Much better… than previous, still worse than first version.</p>

<p>If you looked at <code>difference</code> documentation, take a look at its implementation under “Source”.
Nothing prevent us to pass sequence as second argument instead of set. Just removing casting to set.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">sieve-4</span> <span class="p">[]</span>
</span><span class="line">  <span class="p">(</span><span class="k">loop </span><span class="p">[</span><span class="nv">nums</span> <span class="p">(</span><span class="nb">set </span><span class="p">(</span><span class="nb">cons </span><span class="mi">2</span> <span class="p">(</span><span class="nb">range </span><span class="mi">3</span> <span class="mi">2000000</span> <span class="mi">2</span><span class="p">)))</span> <span class="nv">n</span> <span class="mi">3</span><span class="p">]</span>
</span><span class="line">    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="nv">n</span><span class="p">)</span> <span class="mi">2000000</span><span class="p">)</span> <span class="p">(</span><span class="nb">reduce + </span><span class="nv">nums</span><span class="p">)</span>
</span><span class="line">        <span class="p">(</span><span class="nf">recur</span> <span class="p">(</span><span class="nf">clojure.set/difference</span> <span class="nv">nums</span> <span class="p">(</span><span class="nb">range </span><span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="nv">n</span><span class="p">)</span> <span class="mi">2000000</span> <span class="nv">n</span><span class="p">))</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="mi">2</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>~6 seconds. Wow! It’s better than original solution. That means our efforts were not wasteful.</p>

<p>Unfortuantely, we stopped improve our function. But if you want more, other major improvements
can be done in the following areas:</p>

<ul>
  <li>Use non-persistent set to save prime numbers. It prevent overhead on new objects.</li>
  <li>Use “wheel trick” that can be found in the sources of <code>primes</code> from <code>clojure.contrib.lazy-seqs</code>.</li>
  <li>Use dynamic step of iteration. We changed <code>(inc n)</code> to <code>(+ n 2)</code>, but probably there is smarter solution.</li>
  <li>Do not use <code>(reduce +)</code> because it is linear algorithm. We init <code>nums</code> sequence with some arithmetic progression.
Its sum can be calculated in O(1) by formula. When we compose another sequence (second argument for <code>difference</code>)
its also an arithmetic progression and sum can be calculated in O(1). When doing differencem just subtract second sum
from first sum, and it will be current <code>nums</code> sum.</li>
</ul>

<p>There are much more optimisations can be done to improve prime numbers performace.
If you interested, read nice Christophe Grand’s post
<a href="http://clj-me.cgrand.net/2009/07/30/everybody-loves-the-sieve-of-eratosthenes/">Everybody Loves The Sieve Of Erathosthenes</a></p>

<p><a href="https://github.com/mishadoff/project-euler/blob/master/src/project_euler/problem010.clj">(str “Git” “Hub”)</a></p>

<p><strong>P.S</strong> Honestly, I am OK with 12 seconds. But 6 seconds is better. We performed improvements
just to show the point <strong>if you want to improve something, probably, you can do it</strong>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clojure Euler: Problem 009]]></title>
    <link href="http://mishadoff.github.com/blog/clojure-euler-problem-009/"/>
    <updated>2012-12-11T17:41:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/clojure-euler-problem-009</id>
    <content type="html"><![CDATA[<blockquote>
  <p>A Pythagorean triplet is a set of three natural numbers, a &lt; b &lt; c, for which, a^2 + b^2 = c^2</p>

  <p>For example, 3^2 + 4^2 = 9 + 16 = 25 = 5^2</p>
</blockquote>

<blockquote>
  <p>There exists exactly one Pythagorean triplet for which a + b + c = 1000.
Find the product abc.</p>
</blockquote>

<p>Permalink: <a href="http://projecteuler.net/problem=9">http://projecteuler.net/problem=9</a></p>

<!-- more -->

<p>Thinking about clever way to solve it…</p>

<p>Nothing good came up in your mind? Try bruteforce.</p>

<p>Again, the idea behind bruteforce for this problem to iterate over all possible values
for <code>a</code>, <code>b</code> and <code>c</code>, that sums to <code>1000</code> and compose Pythagorean triplet.
That’s why we need predicate to test if three numbers compose triplet:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">is-triplet?</span> <span class="p">[</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">b</span> <span class="nv">b</span><span class="p">))</span> <span class="p">(</span><span class="nb">* </span><span class="nv">c</span> <span class="nv">c</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Then our bruteforce solution looks like this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">first </span><span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">a</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="mi">1000</span><span class="p">)</span> <span class="nv">b</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="mi">1000</span><span class="p">)</span> <span class="nv">c</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="mi">1000</span><span class="p">)</span>
</span><span class="line">             <span class="ss">:when</span> <span class="p">(</span><span class="nb">and </span><span class="p">(</span><span class="nf">is-triplet?</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nb">+ </span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="mi">1000</span><span class="p">))]</span> <span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>It finds the right solution, in ~45 seconds. Bad enough.</p>

<h3 id="trick-1">Trick #1</h3>

<p>Do not iterate on <code>c</code> variable, because knowing <code>a</code> and <code>b</code> we always
can calculate <code>c = 1000 - a - b</code>.</p>

<p>Problem solution transformed into next one:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">first </span><span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">a</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="mi">1000</span><span class="p">)</span> <span class="nv">b</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="mi">1000</span><span class="p">)</span>
</span><span class="line">             <span class="ss">:let</span> <span class="p">[</span><span class="nv">c</span> <span class="p">(</span><span class="nb">- </span><span class="mi">1000</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)]</span>
</span><span class="line">             <span class="ss">:when</span> <span class="p">(</span><span class="nf">is-triplet?</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)]</span> <span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="trick-2">Trick #2</h3>

<p>Use rule <code>a &lt; b &lt; c</code> from problem definition. Then our iteration will be:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">a</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="mi">1000</span><span class="p">)</span> <span class="nv">b</span> <span class="p">(</span><span class="nb">range </span><span class="nv">a</span> <span class="p">(</span><span class="nb">- </span><span class="mi">1000</span> <span class="nv">a</span><span class="p">))])</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="trick-3">Trick #3</h3>

<p><code>is-triplet?</code> predicate use 3 multiplications, addition and comparison.
We can add to <code>:when</code> section, predicate that compare <code>c</code> to <code>b</code>. This is also
slightly reduce number of <code>is-triplet?</code> execution.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="ss">:when</span> <span class="p">(</span><span class="nb">and </span><span class="p">(</span><span class="nb">&gt; </span><span class="nv">c</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">is-triplet?</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Now solution found in ~45 msecs. 1000 times faster. Not bad.</p>

<p><a href="https://github.com/mishadoff/project-euler/blob/master/src/project_euler/problem009.clj">(apply str (reverse “buHtiG”))</a></p>

<p><strong>P.S.</strong> Unfortunately, there was nothing in this problem about new clojure
functions, programming and even problem was not challenging. But you see the way how
we solve it. We tried “bad” approach with knowing about all its disadvantages.
One more step and we improved it and got right solution. So it is not that bad
approach to try simple solution, even if it is wrong.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ingress Tricks]]></title>
    <link href="http://mishadoff.github.com/blog/ingress-tricks/"/>
    <updated>2012-12-11T12:00:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/ingress-tricks</id>
    <content type="html"><![CDATA[<p>Ingress - MMORPG with <a href="http://en.wikipedia.org/wiki/Augmented_reality">augmented reality</a> created by Google.
This is very impressive game with capability to run over the city with your friends for capturing portals.</p>

<!-- more -->

<p><img src="http://i.imgur.com/vskNt.jpg?1" alt="" /></p>

<p>The game genre positioned as <strong>MMMMOARG</strong> (<em>massively multiplayer map-based mobile online augmented reality game</em>).
In fact, it’s just MMORPG. You have character, you play online with other people.</p>

<h2 id="brief-game-overview">Brief game overview</h2>

<p><em>skip if you already now what Ingress is</em></p>

<p>There are two fractions in game: <strong>Enlightened</strong> and <strong>Resistance</strong>.
In few words, Enlightened for a progress and big changes, Resistance for conservative being.
<strong>Portals</strong> are famous places like monuments, memorials, sculptures, etc.
Each fraction can capture portals, improve, destroy them, link portals with each other,
and create control field (<em>by linking three portals in triangle</em>). Area under this control field covers
some number of <strong>mind units</strong>. Fraction that have more mind units - more succesful to achieve its goal.</p>

<h2 id="some-tricks">Some tricks</h2>

<p>If you already a member of Ingress, check these tricks, probably some you know.</p>

<h2 id="resonators"><strong>Resonators</strong></h2>
<ul>
  <li><strong>Deploy resonator on maximum distance betwen portal.</strong> Because it is much harder for your enemy
to destroy spattered resonators than if they were in one place.</li>
  <li><strong>Waste resonators.</strong> If you have no time while running near neutral or low-level
portal, just deploy one resonator of your maximum level. You still can not link it to another portal,
but enemy need to spend enough effort to destroy it.</li>
  <li><strong>Upgrade.</strong> Use upgrade menu to improve resonators on portal. If somebody deployed L1 resonator, and you
can change it to L4, it would be good.</li>
  <li><strong>Use specific resonators.</strong> By default you deploy only L1 resonators. From upgrade menu you can select
what resonators you want to deploy.</li>
</ul>

<h2 id="bursters"><strong>Bursters</strong></h2>
<ul>
  <li><strong>Do not waste bursters.</strong> It’s useless to fire couple bursts if they are not destroying resonators/portals. Just save them.
When you have enough bursters, then you can destroy enemy portal and get XP.</li>
  <li><strong>Use bursters from optimal point.</strong> It’s opposite from previous. Find place where your bursters’ coverage
on enemy resonators will be maximum. Use weighted estimate, you need stand closer to higher level resonators.</li>
  <li><strong>Use specific bursters.</strong> By default you fire with you maximum level bursters. If enemy portal not so hard you can
select lower-level burster from weapons menu.</li>
</ul>

<h2 id="mods"><strong>Mods</strong></h2>
<ul>
  <li><strong>Deploy portal shields.</strong> For portals that have enough support and high level. Portal shields are relatively rare resources, so don’t waste them.
Also if you deployed shield on high level portal, much harder for enemy to get resources, and destroy it.</li>
</ul>

<h2 id="links"><strong>Links</strong></h2>
<ul>
  <li><strong>Plan links and fields carefully.</strong> You must not be fast at linking, in case you linking more than 4 portals,
there are possibilities. And you should choose one that gives you maximum number of fields.
To make link between A and B, you need portal A with enough distance to B, and portal key from B.</li>
  <li><strong>Build long links.</strong> Long links can prevent other fraction to link something.
Because crossed links are restricted. But if you have time to link something better, think about it.</li>
</ul>

<h2 id="resources"><strong>Resources</strong></h2>
<ul>
  <li><strong>Gather resources.</strong> Find place where you can see a lot of high-level portals and hack them. One hour
spent near them gives you a lot of resources.</li>
  <li><strong>Share resources.</strong> You can, or better you need to share resources with your friends. It’s cooperative game.</li>
</ul>

<h2 id="area"><strong>Area</strong></h2>
<ul>
  <li><strong>Distribute area locally.</strong> Communicate with players from your city and plan what territory can be supported by whom.</li>
  <li><strong>Strategic portals.</strong> Don’t plan your strategic portals in common places. They can be simply destroyed. Use for your strategic
portals some strange places, like portal inside building, mountain portals, island portals, etc.</li>
  <li><strong>Use Intel Map to plan your trip.</strong> Move only in the way you already know. Don’t practice <em>blind trips</em>.</li>
</ul>

<h2 id="friends"><strong>Friends</strong></h2>
<ul>
  <li><strong>Play with friends.</strong> Preferably, the same level friends. Obviously, you can destroy more, you can capture more.
Also, it’s more fun to talk with somebody during the moving.</li>
  <li><strong>Communication.</strong> If you see somebody playing ingress near you, don’t hesitate to meet and make friendship. Even he or she from
another fraction. Maybe it’s your future spouse.</li>
</ul>

<h2 id="home-playing"><strong>Home playing</strong></h2>
<ul>
  <li><strong>Repair portals.</strong> If you are sitting at office, have enough XM, you still can help your fraction.
Just open portal keys and you can repair these portals distantly. Keep in mind that resonator XM reduces by 10% each day.
The trick is also to repair one most valuable resonator.</li>
  <li><strong>Solve puzzles.</strong> If you solve some puzzle that appeared on niantic site or in your inventory, you
can help you fraction a lot by posting code in faction channel.</li>
  <li><strong>Manage the actions.</strong> You can sit at home with opened Intel Map and guide somebody to do right things.</li>
</ul>

<p>This post planned to be updatable, because all these advices found upon investigation. Check for new updates.
Also, if you have some useful information, other tips and tricks,  post it in comments.</p>

<h2 id="links-1">Links</h2>

<p>More about game and some useful resources here:</p>

<ul>
  <li><a href="http://www.ingress.com/">Ingress Official</a></li>
  <li><a href="http://www.nianticproject.com/">History and Puzzles</a></li>
  <li><a href="http://ingressfieldguide.com/">Tips &amp; Tricks</a></li>
  <li><a href="http://www.reddit.com/r/Ingress">Ingress subreddit</a></li>
  <li><a href="http://www.ingress.com/intel">Intel Map</a></li>
</ul>

<h2 id="bonus-xkcd">Bonus: xkcd</h2>

<p><img src="http://imgs.xkcd.com/comics/location.png" alt="" /></p>

<p>Viva la Resistance!</p>

<p><strong>P.S.</strong> Unfornunately game at closed beta right now. Only for Android devices.
Hope it will be released very soon and we will see more people near monuments.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[What is source code?]]></title>
    <link href="http://mishadoff.github.com/blog/what-is-source-code/"/>
    <updated>2012-11-29T23:31:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/what-is-source-code</id>
    <content type="html"><![CDATA[<p>It’s not just a bunch of <code>ifs</code> and <code>fors</code> you mastering every day.
It’s not even <code>Factories</code>, <code>Builders</code> and <code>Proxies</code> you learn from <a href="http://en.wikipedia.org/wiki/Design_Patterns">GoF</a>.</p>

<p>I think this term has much wider meaning.</p>

<!-- more -->

<p><em>Almost everything you can create is source code.</em></p>

<p>By creation I mean creation in digital world, not building the house.
Good criteria of source code - is something that may be changed and need to be up-to-date.</p>

<p><a href="https://github.com/WiredEnterprise/Lord-of-the-Files">Article</a> - source code,
<a href="https://github.com/mishadoff/mishadoff.github.com">Blog</a> - source code,
<a href="https://github.com/patmorin/ods">Book</a> - source code,
<a href="https://github.com/magnars/.emacs.d">Configuration</a> - source code,
<a href="https://github.com/bundestag/gesetze">Laws</a> - source code,
<a href="https://github.com/norinori2222/boyfriend_require/blob/master/README-en.md">Dating request</a> is also source code.</p>

<p>The word <code>code</code> can be confusing, but it is not.</p>

<p><strong>Code</strong> - is just a set of instructions that can be processed by <em>processor</em>.</p>

<p>From that point of view, processor is our brain.</p>

<p>And if you really appreciate your <em>source code</em>, choose appropriate control version system for it.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clojure Euler: Problem 008]]></title>
    <link href="http://mishadoff.github.com/blog/clojure-euler-problem-008/"/>
    <updated>2012-11-27T22:53:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/clojure-euler-problem-008</id>
    <content type="html"><![CDATA[<blockquote>
  <p>Find the greatest product of five consecutive digits in the 1000-digit number.</p>
</blockquote>

<p>Permalink: <a href="http://projecteuler.net/problem=8">http://projecteuler.net/problem=8</a></p>

<p><em>Large number under the cut.</em></p>

<!-- more -->

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class=""><span class="line">73167176531330624919225119674426574742355349194934
</span><span class="line">96983520312774506326239578318016984801869478851843
</span><span class="line">85861560789112949495459501737958331952853208805511
</span><span class="line">12540698747158523863050715693290963295227443043557
</span><span class="line">66896648950445244523161731856403098711121722383113
</span><span class="line">62229893423380308135336276614282806444486645238749
</span><span class="line">30358907296290491560440772390713810515859307960866
</span><span class="line">70172427121883998797908792274921901699720888093776
</span><span class="line">65727333001053367881220235421809751254540594752243
</span><span class="line">52584907711670556013604839586446706324415722155397
</span><span class="line">53697817977846174064955149290862569321978468622482
</span><span class="line">83972241375657056057490261407972968652414535100474
</span><span class="line">82166370484403199890008895243450658541227588666881
</span><span class="line">16427171479924442928230863465674813919123162824586
</span><span class="line">17866458359124566529476545682848912883142607690042
</span><span class="line">24219022671055626321111109370544217506941658960408
</span><span class="line">07198403850962455444362981230987879927244284909188
</span><span class="line">84580156166097919133875499200524063689912560717606
</span><span class="line">05886116467109405077541002256983155200055935729725
</span><span class="line">71636269561882670428252483600823257530420752963450</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Idea behind this problem is pretty straightforward:</p>

<ol>
  <li>Init <code>maximum</code> with some small value, zero would be good.</li>
  <li>Take first 5 digits, calculate the product.</li>
  <li>If product is greater than our current <code>maximum</code>, reassign it.</li>
  <li>Shift, to take other 5 digits, and back to the step 1.</li>
</ol>

<p>A simple optimization can be applied: if our last element of 5 digit group is zero,
then skip 5 shifts. But it’s details.</p>

<p>Let’s make our problem little harder to get more from clojure.</p>

<p>Assume that these digits stored in the file. First thing we need: to read the file.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">slurp </span><span class="s">&quot;path/to/the/file&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><a href="http://clojuredocs.org/clojure_core/clojure.core/slurp">slurp</a> is the simplest
function to read file content (<em>In fact, not only files</em>).
It just returns string representation of the whole file.</p>

<p>Then we need to break one large string into symbols.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">seq </span><span class="s">&quot;helloyo&quot;</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="sc">\h</span> <span class="sc">\e</span> <span class="sc">\l</span> <span class="sc">\l</span> <span class="sc">\o</span> <span class="sc">\y</span> <span class="sc">\o</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><a href="http://clojuredocs.org/clojure_core/clojure.core/seq">seq</a> return a sequence with linear access
to collection. If applied to string, return sequence of characters.</p>

<p>But, there are some garbage in the file we don’t want, new lines for example.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">remove </span><span class="o">#</span><span class="p">(</span><span class="nb">= </span><span class="sc">\n</span><span class="nv">ewline</span> <span class="nv">%</span><span class="p">)</span> <span class="p">[</span><span class="sc">\h</span> <span class="sc">\e</span> <span class="sc">\l</span> <span class="sc">\l</span> <span class="sc">\o</span> <span class="sc">\n</span><span class="nv">ewline</span> <span class="sc">\y</span> <span class="sc">\o</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>(<em>slash</em>) + something - represents character in clojure.
<code>\newline</code> is a new line, known as <code>\n</code> in other languages.</p>

<p>Now we have long sequence with all digits from file.
Need to get all consecutive groups with 5 letters.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nf">partition</span> <span class="mi">5</span> <span class="mi">1</span> <span class="p">[</span><span class="sc">\h</span> <span class="sc">\e</span> <span class="sc">\l</span> <span class="sc">\l</span> <span class="sc">\o</span> <span class="sc">\y</span> <span class="sc">\o</span><span class="p">])</span> <span class="nv">=&gt;</span> <span class="p">[[</span><span class="sc">\h</span> <span class="sc">\e</span> <span class="sc">\l</span> <span class="sc">\l</span> <span class="sc">\o</span><span class="p">]</span> <span class="p">[</span><span class="sc">\e</span> <span class="sc">\l</span> <span class="sc">\l</span> <span class="sc">\o</span> <span class="sc">\y</span><span class="p">]</span> <span class="nv">...</span> <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><a href="http://clojuredocs.org/clojure_core/clojure.core/partition">partition</a>
is an excelent function for such tasks. We specify <code>5</code> - size of partition,
and <code>1</code> shift size. It generates all consecutive groups with 5 elements till the end.</p>

<p>Calulating the product for each group gives us the solution.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">reduce * </span><span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Not so fast.</p>

<p>You, probably, get <code>ClassCastException</code>.</p>

<p>After reading the file, we just get bunch of characters,
instead of digits in mathematical sense. And applied mathematical operation <code>*</code> to them.
So, simply speaking, <code>\1</code> is not <code>1</code>.</p>

<p>That’s why we need to transform every digit character to it’s actual digit value.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="clojure"><span class="line"><span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nb">- </span><span class="p">(</span><span class="nb">int </span><span class="nv">%</span><span class="p">)</span> <span class="mi">48</span><span class="p">)</span> <span class="p">[</span><span class="sc">\1</span> <span class="sc">\2</span> <span class="sc">\3</span><span class="p">])</span> <span class="nv">=&gt;</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This awful implementation do the work.</p>

<ul>
  <li>Cast each character to int, get the <a href="http://en.wikipedia.org/wiki/ASCII">ASCII</a>
representation for digit.</li>
  <li>From each ASCII value we subtract <code>48</code> and get digit value.</li>
</ul>

<p>Applying <code>product</code> of digits defined earlier we get solution to this problem.</p>

<p>Again, full code on <a href="https://github.com/mishadoff/project-euler/blob/master/src/project_euler/problem008.clj">GitHub</a>.</p>

<p><strong>P.S.</strong> <code>slurp</code> function very powerful and has may applications. You can specify encoding
for reading as you want or read whole html page by url. But it is also very dangerous function,
because reads all file contents to the memory and can take considerable amount of time. If you have
a large file, say 15GB, read it line by line with buffered reader. Also, note
<a href="http://clojuredocs.org/clojure_core/clojure.core/spit">spit</a> function. It is opposite to <code>slurp</code> -
writes string to the file.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pigeon Cipher]]></title>
    <link href="http://mishadoff.github.com/blog/pigeon-cipher/"/>
    <updated>2012-11-24T14:52:00+02:00</updated>
    <id>http://mishadoff.github.com/blog/pigeon-cipher</id>
    <content type="html"><![CDATA[<p>The skeleton of the pigeon was found in England.
There is small red box tied to its leg with the handwritten ciphered message.
Britain cryptographers failed the attempt to decipher the message and it was released in public.
It can be a good puzzle for a weekend.</p>

<!-- more -->

<h3 id="input">Input</h3>

<p><img src="http://news.bbcimg.co.uk/media/images/64345000/jpg/_64345866_masons_pigeon_code_07.jpg" alt="" /></p>

<p>The paper consists of some parts <a href="http://i2.cdn.turner.com/cnn/2012/images/11/23/large-pigeon-message-1.pdf">Full PDF scan</a>:</p>

<ul>
  <li><strong>Title:</strong> “Pigeon Service”</li>
  <li><strong>TO:</strong> XO2</li>
  <li><strong>Ciphered Message</strong></li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class=""><span class="line">AOAKN HVPKD FNFJW YIDDC
</span><span class="line">RQXSR DJHFP GOVFN MIAPX
</span><span class="line">PABUZ WYYNP CMPNW HJRZH
</span><span class="line">NLXKG MEMKK ONOIB AKEEQ
</span><span class="line">WAOTA RBQRH DJOFM TPZEH
</span><span class="line">LKXGH RGGHT JRZCQ FNKTQ
</span><span class="line">KLDTS FQIRW AOAKN 27 1525/6</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li><strong>Pigeon IDs:</strong> <code>NURP 40 TW 194</code> and <code>NURP 37 OK 76</code>.
There are was two pigeons as we can see from the field <em>Number of copies sent</em>.</li>
  <li><strong>LIB 1625</strong></li>
  <li><strong>Time of origin:</strong> 1522</li>
  <li><strong>Sender’s signature:</strong> W Stit Sjt</li>
</ul>

<h3 id="output">Output</h3>

<p>The most interesting part of this paper is the ciphered message. It consists of 27 5-letter blocks.
At the end of the message we can see number 27, probably some sort of control sum of blocks.
First block <code>AOAKN</code> equals to the last one, so it can be some sort of indicator of the cipher or key used.</p>

<p>From pigeon ids we can know that they were born in <code>1940</code> and <code>1937</code> years respectively, so this cipher from World War II.</p>

<p>Probably, the message was decoded with <a href="http://en.wikipedia.org/wiki/One-time_pad">one time pad</a> cipher, that
has a perfect secrecy. So, maybe this cipher will never be decrypted.</p>

<p><em>Note:</em> It can be decrypted with bruteforce algorithm, but in that case we can obtain any message.</p>

<p>Anyway, if you interested in this topic, try to spend a couple of hours for breaking the cipher,
it is a good workout for your brain.</p>

<h3 id="links">Links</h3>

<ol>
  <li><a href="http://www.bbc.co.uk/news/uk-20458792">BBC</a></li>
  <li><a href="http://edition.cnn.com/2012/11/23/world/europe/uk-wwii-pigeon-mystery/index.html">CNN</a></li>
</ol>

<p><strong>P.S.</strong> Don’t be addicted, you have a lot things to do instead of breaking this stupid cipher.
Very unlikely, but it can be some sort of a joke.</p>
]]></content>
  </entry>
  
</feed>
